MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;/**************************************************************/
                      00002 ;/*  File Name: FuelGauge_Write_LCD.asm
                      00003 ;/***************************************/
                      00004 ;      This routine contains various subroutines that are
                      00005 ;      needed to display stings and numbers in LCD for Fuel Gauge Demo Board
                      00006 ;
                      00007 ;       Ver 1.0
                      00008 ;       Date: 7-28-2007
                      00009 ;               AIPD
                      00010 ;               Microchip Technology Inc 
                      00011 ;/************************************************************/
                      00012 ;************************************************************************
                      00013 ;               LEGAL NOTICE
                      00014 ;
                      00015 ;  The information contained in this document is proprietary and 
                      00016 ;  confidential information of Microchip Technology Inc.  Therefore all 
                      00017 ;  parties are required to sign a non-disclosure agreement before  
                      00018 ;  receiving this document.
                      00019 ;
                      00020 ;  The information contained in this Application Note is for suggestion 
                      00021 ;  only.  It is your responsibility to ensure that your application meets 
                      00022 ;  with your specifications.  No representation or warranty is given and 
                      00023 ;  no liability is assumed by Microchip Technology Incorporated with 
                      00024 ;  respect to the accuracy or use of such information or infringement of 
                      00025 ;  patents or other intellectual property arising from such use or 
                      00026 ;  otherwise.
                      00027 ;
                      00028 ;                Software License Agreement
                      00029 ;
                      00030 ; The software supplied herewith by Microchip Technology Incorporated 
                      00031 ; (the "Company") for its PICmicro® Microcontroller is intended and 
                      00032 ; supplied to you, the Company's customer, for use solely and 
                      00033 ; exclusively on Microchip PICmicro Microcontroller products. The 
                      00034 ; software is owned by the Company and/or its supplier, and is 
                      00035 ; protected under applicable copyright laws. All rights are reserved. 
                      00036 ;  Any use in violation of the foregoing restrictions may subject the 
                      00037 ; user to criminal sanctions under applicable laws, as well as to 
                      00038 ; civil liability for the breach of the terms and conditions of this 
                      00039 ; license.
                      00040 ;
                      00041 ; THIS SOFTWARE IS PROVIDED IN AN "AS IS" CONDITION. NO WARRANTIES, 
                      00042 ; WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED 
                      00043 ; TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A 
                      00044 ; PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT, 
                      00045 ; IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR 
                      00046 ; CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.
                      00047 
                      00048 
                      00049 ;************************************************************************
                      00050 
                      00051 
                      00052 
                      00053         list p=18f4550
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00054 #include        <p18f4550.inc>
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  $Id: P18F4550.INC,v 1.10 2006/10/25 17:47:56 nairnj Exp $
                      00005 ;  MPASM PIC18F4550 processor include
                      00006 ; 
                      00007 ;  (c) Copyright 1999-2006 Microchip Technology, All rights reserved
                      00008 ;==========================================================================
                      00009 
                      01642         LIST
                      00055 ; #include      FuelGauge_LCDString.inc
                      00056 #include        FuelGauge_Write_LCD.inc
                      00001 ;/****************************************/
                      00002 ;/*  File Name: FuelGauge_Write_LCD.inc
                      00003 ;/***************************************/
                      00004 
                      00005 
                      00006 #define LCD_D4          PORTA, 0        ; LCD data bits
                      00007 #define LCD_D5          PORTA, 1
                      00008 #define LCD_D6          PORTA, 2
                      00009 #define LCD_D7          PORTA, 3
                      00010 ;
                      00011 #define LCD_D4_DIR      TRISA, 0        ; LCD data bits
                      00012 #define LCD_D5_DIR      TRISA, 1
                      00013 #define LCD_D6_DIR      TRISA, 2
                      00014 #define LCD_D7_DIR      TRISA, 3
                      00015 
                      00016 ; ---- new ----------
                      00017 #define LCD_E           PORTD, 2        ; LCD E clock
                      00018 #define LCD_RW          PORTD, 1        ; LCD read/write line
                      00019 #define LCD_RS          PORTD, 0        ; LCD register select line
                      00020 
                      00021 
                      00022 #define LCD_INS         0       
                      00023 #define LCD_DATA        1
                      00024 ;
                      00025 
  0000                00026         extern  digitT1,digitT2,digitT3,digitT4,digitT5,digitT6,digitT7
  0000                00027         extern  digitT8,digitT9,digitT10,digitT11,digitT12,digitT13
                      00028 ;       digitT1 --> Lsd, digitT13 --> MSD 
                      00029 ;   radix dec           ; Very Important --> Specify default in Radix  
                      00030 
  0000                00031         global  Display_Results, Display_Results_Volts, Display_Results_Current
  0000                00032         global  Disp_FuelRemPerct, Disp_FuelRemmAH, Display_FuelUsed, Disp_StdUnderCharged
  0000                00033         global  Disp_ChargeCompleted, Disp_PressS1, Disp_DisconnectJP2, Disp_ConnectJP1, Disp_BatLowerTh
                            an0_75V
  0000                00034         global  Disp_PlseWaitAtL1, Disp_InitAtL2
  0000                00035         global  Disp_ConntBattery, Disp_AtTP9_PressS1
  0000                00036         global  LCDLine_1, LCDLine_2,d_write,i_write,LCDWrite,LCDBusy, LCDInit
  0000                00037         global  temp_wr
                      00038 
  0000                00039         extern  bin_bcd, bin16_bcd 
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00040         ;Bin48_bcd_volts, Bin48_bcd_currents
  0000                00041         extern  ADC_Sign, Gain_Selected, LSD, FoundFistDigit
                      00042 
                      00057 
                      00058 
                      00059 
                      00060 LCD_Reg         UDATA
000000                00061 COUNTER         res     1
000001                00062 delay           res     1
000002                00063 temp_wr         res     1
000003                00064 temp_rd         res     1
                      00065 
                      00066 
                      00067 ;LCDString_VAR  UDATA
                      00068 ;digitT1                RES 1           ;LSB
                      00069 ;digitT2                RES 1
                      00070 ;digitT3                RES 1
                      00071 ;digitT4                RES 1
                      00072 ;digitT5                RES 1
                      00073 ;digitT6                RES 1
                      00074 ;digitT7                RES 1
                      00075 ;digitT8                RES 1
                      00076 ;digitT9                RES 1
                      00077 ;digitT10       RES 1
                      00078 ;digitT11       RES 1
                      00079 ;digitT12       RES 1
                      00080 ;digitT13       RES 1           ;MSB
                      00081 ;
                      00082 
                      00083 
                      00084 LCD_CODE        code
                      00085 
                      00086 ;/* This routin is called from main routin (FuelGaugeDemo_Main.asm) 
                      00087 ;/*   This routin displays strings in LCD.
                      00088 ;*/
                      00089 
                      00090 
                      00091 ;-------------------------------------------------------------------------------------------------------
                            -----   
000000                00092 Display_Results
000000                00093 Display_Results_Volts
                      00094 ;---------------------------------------
                      00095 ;               digitT1         ; ones
                      00096 ;               digitT2         ; tens
                      00097 ;               digitT3         ; hundreds
                      00098 ;               digitT4         ; thousands
                      00099 ;               digitT5         ; Ten_Thousands
                      00100 ;               digitT6         ; OneHundreds_Thousands
                      00101 ;               digitT7         ; One_million
                      00102 ;               digitT8         ; Ten_million
                      00103 ;               digitT9         ; 
                      00104 ;               digitT10        ; MSB for Gain = 1
                      00105 ;               digitT11        ; ---> 
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00106 ;               digitT12        ; --->MSB for Gain = 8
                      00107 ;               digitT13        ; --->0
                      00108 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00109 ;
                      00110 ; digitT13-digitT12-digitT11-digitT10-digitT9-digitT8-digitT7-digitT6-digitT5-digitT4-digitT3-digitT2-di
                            gitT11
                      00111 ;  The Maximum value of MCP3421 is 4.096 V.
                      00112 
                      00113 ; 2^18 = 262,144 in decimal ==> 40000 hex --> 5 registers ===> display from digit5 to digit1
                      00114 
                      00115 ;---------------------------------------
                      00116 
                      00117 ;       banksel VoltageOrCurrent
                      00118 ;       btfss   VoltageOrCurrent,0
                      00119 ;       bra             DisPlayCurrent
                      00120 
000000 EC?? F???      00121         call    LCDLine_1               ;Display Battery Voltage in Line 1
000004 010?           00122         banksel temp_wr 
000006 0E56           00123         movlw   A'V'                    
000008 6E??           00124         movwf   temp_wr
00000A EC?? F???      00125         call    d_write
                      00126 
00000E 010?           00127         banksel temp_wr         
000010 0E20           00128         movlw   A' '            
000012 6E??           00129         movwf   temp_wr
000014 EC?? F???      00130         call    d_write
                      00131 
000018 010?           00132         banksel temp_wr         
00001A 0E3D           00133         movlw   A'='
00001C 6E??           00134         movwf   temp_wr
00001E EC?? F???      00135         call    d_write
                      00136         
000022 010?           00137         banksel temp_wr
000024 0E20           00138         movlw   A' '            
000026 6E??           00139         movwf   temp_wr
000028 EC?? F???      00140         call    d_write
                      00141 
00002C 010?           00142         banksel ADC_Sign
00002E A0??           00143         btfss   ADC_Sign,0
000030 D???           00144         bra             Put_Negative_Sign
                      00145 ;       bra             Put_Positive_Sign
000032                00146 Put_Positive_Sign
000032 010?           00147         banksel temp_wr
000034 0E2B           00148         movlw   A'+'                    ;send Positive Sign "+"
000036 6E??           00149         movwf   temp_wr
000038 EC?? F???      00150         call    d_write
00003C EF?? F???      00151         goto    Start_DisPlay_Values
                      00152 
000040                00153 Put_Negative_Sign
000040 010?           00154         banksel temp_wr
000042 0E2D           00155         movlw   A'-'                    ;send Positive Sign "-"
000044 6E??           00156         movwf   temp_wr
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000046 EC?? F???      00157         call    d_write
                      00158 ;       bra             Start_DisPlay_Values
                      00159         
                      00160 
00004A                00161 Start_DisPlay_Values
                      00162 
00004A 010?           00163         banksel Gain_Selected
                      00164 ; testing
                      00165 ;       bra             DisVForGain4
                      00166 
00004C B0??           00167         btfsc   Gain_Selected,0
00004E EF?? F???      00168         goto    DisVForGain2
000052 B2??           00169         btfsc   Gain_Selected,1
000054 EF?? F???      00170         goto    DisVForGain4
000058 B4??           00171         btfsc   Gain_Selected,2
00005A EF?? F???      00172         goto    DisVForGain8
                      00173 
00005E                00174 DisVForGain1
00005E 010?           00175         banksel digitT10
000060 50??           00176         movf    digitT10,W                      ;Get Above decimal point (>4)
000062 EC?? F???      00177         call    bin_bcd
                      00178 
000066 010?           00179         banksel LSD
000068 50??           00180         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      00181 
00006A 010?           00182         banksel temp_wr
00006C 6E??           00183         movwf   temp_wr
00006E EC?? F???      00184         call    d_write
                      00185 
000072 010?           00186         banksel temp_wr
000074 0E2E           00187         movlw   A'.'                    ;send decimal point "."
000076 6E??           00188         movwf   temp_wr
000078 EC?? F???      00189         call    d_write
                      00190 
00007C 010?           00191         banksel digitT9
00007E 50??           00192         movf    digitT9,W                       ;below decimal point
000080 EC?? F???      00193         call    bin_bcd
                      00194 
000084 010?           00195         banksel LSD
000086 50??           00196         movf    LSD,W                   ;send low digit   x.#x
                      00197 
000088 010?           00198         banksel temp_wr
00008A 6E??           00199         movwf   temp_wr
00008C EC?? F???      00200         call    d_write
                      00201 
000090 010?           00202         banksel digitT8
000092 50??           00203         movf    digitT8,W                       ;Get hundreds
000094 EC?? F???      00204         call    bin_bcd
                      00205 
000098 010?           00206         banksel LSD
00009A 50??           00207         movf    LSD,W                   ;send low digit   x.x#
                      00208 
00009C 010?           00209         banksel temp_wr
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00009E 6E??           00210         movwf   temp_wr
0000A0 EC?? F???      00211         call    d_write
                      00212 
0000A4 010?           00213         banksel digitT7
0000A6 50??           00214         movf    digitT7,W                       ;Get tens
0000A8 EC?? F???      00215         call    bin_bcd
                      00216 
0000AC 010?           00217         banksel LSD
0000AE 50??           00218         movf    LSD,W                   ;send low digit   x.x#
                      00219 
0000B0 010?           00220         banksel temp_wr
0000B2 6E??           00221         movwf   temp_wr
0000B4 EC?? F???      00222         call    d_write
                      00223 
0000B8 010?           00224         banksel digitT6
0000BA 50??           00225         movf    digitT6,W                       ;Get tens
0000BC EC?? F???      00226         call    bin_bcd
                      00227 
0000C0 010?           00228         banksel LSD
0000C2 50??           00229         movf    LSD,W                   ;send low digit   x.x#
                      00230 
0000C4 010?           00231         banksel temp_wr
0000C6 6E??           00232         movwf   temp_wr
0000C8 EC?? F???      00233         call    d_write
                      00234 
0000CC 010?           00235         banksel digitT5
0000CE 50??           00236         movf    digitT5,W                       ;Get tens
0000D0 EC?? F???      00237         call    bin_bcd
                      00238 
0000D4 010?           00239         banksel LSD
0000D6 50??           00240         movf    LSD,W                   ;send low digit   x.x#
                      00241 
0000D8 010?           00242         banksel temp_wr
0000DA 6E??           00243         movwf   temp_wr
0000DC EC?? F???      00244         call    d_write
                      00245 
0000E0 010?           00246         banksel digitT4
0000E2 50??           00247         movf    digitT4,W                       ;Get tens
0000E4 EC?? F???      00248         call    bin_bcd
                      00249 
0000E8 010?           00250         banksel LSD
0000EA 50??           00251         movf    LSD,W                   ;send low digit   x.x#
                      00252 
0000EC 010?           00253         banksel temp_wr
0000EE 6E??           00254         movwf   temp_wr
0000F0 EC?? F???      00255         call    d_write
                      00256 
0000F4 010?           00257         banksel digitT3
0000F6 50??           00258         movf    digitT3,W                       ;Get tens
0000F8 EC?? F???      00259         call    bin_bcd
                      00260 
0000FC 010?           00261         banksel LSD
0000FE 50??           00262         movf    LSD,W                   ;send low digit   x.x#
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00263 
000100 010?           00264         banksel temp_wr
000102 6E??           00265         movwf   temp_wr
000104 EC?? F???      00266         call    d_write
                      00267 
                      00268 
000108 0E20           00269         movlw   A' '                    ; spaces        
00010A 010?           00270         banksel temp_wr
00010C 6E??           00271         movwf   temp_wr
00010E EC?? F???      00272         call    d_write
                      00273 
000112 0E56           00274         movlw   A'V'                    ;send "V" unit
000114 010?           00275         banksel temp_wr
000116 6E??           00276         movwf   temp_wr
000118 EC?? F???      00277         call    d_write
                      00278 
                      00279 
00011C 0012           00280         return
                      00281 
00011E                00282 DisVForGain2
00011E 010?           00283         banksel digitT11
000120 50??           00284         movf    digitT11,W                      ;Get Above decimal point (>4)
000122 EC?? F???      00285         call    bin_bcd
                      00286 
000126 010?           00287         banksel LSD
000128 50??           00288         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      00289 
00012A 010?           00290         banksel temp_wr 
00012C 6E??           00291         movwf   temp_wr
00012E EC?? F???      00292         call    d_write
                      00293 
000132 010?           00294         banksel temp_wr 
000134 0E2E           00295         movlw   A'.'                    ;send decimal point "."
000136 6E??           00296         movwf   temp_wr
000138 EC?? F???      00297         call    d_write
                      00298 
                      00299 
00013C 010?           00300         banksel digitT10
00013E 50??           00301         movf    digitT10,W                      ;below decimal point
000140 EC?? F???      00302         call    bin_bcd
                      00303 
000144 010?           00304         banksel LSD
000146 50??           00305         movf    LSD,W                   ;send low digit   x.#x
                      00306 
000148 010?           00307         banksel temp_wr 
00014A 6E??           00308         movwf   temp_wr
00014C EC?? F???      00309         call    d_write
                      00310 
000150 010?           00311         banksel digitT9
000152 50??           00312         movf    digitT9,W                       ;below decimal point
000154 EC?? F???      00313         call    bin_bcd
                      00314 
                      00315 
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000158 010?           00316         banksel LSD
00015A 50??           00317         movf    LSD,W                   ;send low digit   x.#x
                      00318 
00015C 010?           00319         banksel temp_wr 
00015E 6E??           00320         movwf   temp_wr
000160 EC?? F???      00321         call    d_write
                      00322 
000164 010?           00323         banksel digitT8
000166 50??           00324         movf    digitT8,W                       ;Get hundreds
000168 EC?? F???      00325         call    bin_bcd
                      00326 
00016C 010?           00327         banksel LSD
00016E 50??           00328         movf    LSD,W                   ;send low digit   x.x#
                      00329 
000170 010?           00330         banksel temp_wr 
000172 6E??           00331         movwf   temp_wr
000174 EC?? F???      00332         call    d_write
                      00333 
000178 010?           00334         banksel digitT7
00017A 50??           00335         movf    digitT7,W                       ;Get tens
00017C EC?? F???      00336         call    bin_bcd
                      00337 
000180 010?           00338         banksel LSD
000182 50??           00339         movf    LSD,W                   ;send low digit   x.x#
                      00340 
000184 010?           00341         banksel temp_wr 
000186 6E??           00342         movwf   temp_wr
000188 EC?? F???      00343         call    d_write
                      00344 
00018C 010?           00345         banksel digitT6
00018E 50??           00346         movf    digitT6,W                       ;Get tens
000190 EC?? F???      00347         call    bin_bcd
                      00348 
000194 010?           00349         banksel LSD
000196 50??           00350         movf    LSD,W                   ;send low digit   x.x#
                      00351 
000198 010?           00352         banksel temp_wr 
00019A 6E??           00353         movwf   temp_wr
00019C EC?? F???      00354         call    d_write
                      00355 
0001A0 010?           00356         banksel digitT5
0001A2 50??           00357         movf    digitT5,W                       ;Get tens
0001A4 EC?? F???      00358         call    bin_bcd
                      00359 
0001A8 010?           00360         banksel LSD
0001AA 50??           00361         movf    LSD,W                   ;send low digit   x.x#
                      00362 
0001AC 010?           00363         banksel temp_wr 
0001AE 6E??           00364         movwf   temp_wr
0001B0 EC?? F???      00365         call    d_write
                      00366 
                      00367 
0001B4 010?           00368         banksel digitT4
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0001B6 50??           00369         movf    digitT4,W                       ;Get tens
0001B8 EC?? F???      00370         call    bin_bcd
0001BC 010?           00371         banksel LSD
0001BE 50??           00372         movf    LSD,W                   ;send low digit   x.x#
                      00373 
0001C0 010?           00374         banksel temp_wr 
0001C2 6E??           00375         movwf   temp_wr
0001C4 EC?? F???      00376         call    d_write
                      00377 
0001C8 010?           00378         banksel digitT3
0001CA 50??           00379         movf    digitT3,W                       ;Get tens
0001CC EC?? F???      00380         call    bin_bcd
0001D0 010?           00381         banksel LSD
0001D2 50??           00382         movf    LSD,W                   ;send low digit   x.x#
                      00383 
0001D4 010?           00384         banksel temp_wr 
0001D6 6E??           00385         movwf   temp_wr
0001D8 EC?? F???      00386         call    d_write
                      00387 
                      00388 
0001DC 010?           00389         banksel temp_wr 
0001DE 0E56           00390         movlw   A'V'                    ;send "V" unit
0001E0 6E??           00391         movwf   temp_wr
0001E2 EC?? F???      00392         call    d_write
                      00393 
0001E6 0012           00394         return
                      00395 
                      00396 
0001E8                00397 DisVForGain4
                      00398 
0001E8 010?           00399         banksel temp_wr 
0001EA 0E2E           00400         movlw   A'.'                    ;send decimal point "."
0001EC 6E??           00401         movwf   temp_wr
0001EE EC?? F???      00402         call    d_write
                      00403 
0001F2 010?           00404         banksel digitT11
0001F4 50??           00405         movf    digitT11,W                      ;Get Above decimal point (>4)
0001F6 EC?? F???      00406         call    bin_bcd
                      00407 
0001FA 010?           00408         banksel LSD
0001FC 50??           00409         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      00410 
0001FE 010?           00411         banksel temp_wr 
000200 6E??           00412         movwf   temp_wr
000202 EC?? F???      00413         call    d_write
                      00414 
000206 010?           00415         banksel digitT10
000208 50??           00416         movf    digitT10,W                      ;Get Above decimal point (>4)
00020A EC?? F???      00417         call    bin_bcd
00020E 010?           00418         banksel LSD
000210 50??           00419         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      00420 
000212 010?           00421         banksel temp_wr 
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000214 6E??           00422         movwf   temp_wr
000216 EC?? F???      00423         call    d_write
                      00424 
                      00425 
00021A 010?           00426         banksel digitT9
00021C 50??           00427         movf    digitT9,W                       ;below decimal point
00021E EC?? F???      00428         call    bin_bcd
000222 010?           00429         banksel LSD
000224 50??           00430         movf    LSD,W                   ;send low digit   x.#x
                      00431 
000226 010?           00432         banksel temp_wr 
000228 6E??           00433         movwf   temp_wr
00022A EC?? F???      00434         call    d_write
                      00435 
00022E 010?           00436         banksel digitT8
000230 50??           00437         movf    digitT8,W                       ;Get hundreds
000232 EC?? F???      00438         call    bin_bcd
000236 010?           00439         banksel LSD
000238 50??           00440         movf    LSD,W                   ;send low digit   x.x#
                      00441 
00023A 010?           00442         banksel temp_wr 
00023C 6E??           00443         movwf   temp_wr
00023E EC?? F???      00444         call    d_write
                      00445 
000242 010?           00446         banksel digitT7
000244 50??           00447         movf    digitT7,W                       ;Get tens
000246 EC?? F???      00448         call    bin_bcd
00024A 010?           00449         banksel LSD
00024C 50??           00450         movf    LSD,W                   ;send low digit   x.x#
                      00451 
00024E 010?           00452         banksel temp_wr 
000250 6E??           00453         movwf   temp_wr
000252 EC?? F???      00454         call    d_write
                      00455 
000256 010?           00456         banksel digitT6
000258 50??           00457         movf    digitT6,W                       ;Get tens
00025A EC?? F???      00458         call    bin_bcd
00025E 010?           00459         banksel LSD
000260 50??           00460         movf    LSD,W                   ;send low digit   x.x#
                      00461 
000262 010?           00462         banksel temp_wr 
000264 6E??           00463         movwf   temp_wr
000266 EC?? F???      00464         call    d_write
                      00465 
00026A 010?           00466         banksel digitT5
00026C 50??           00467         movf    digitT5,W                       ;Get tens
00026E EC?? F???      00468         call    bin_bcd
000272 010?           00469         banksel LSD
000274 50??           00470         movf    LSD,W                   ;send low digit   x.x#
                      00471 
000276 010?           00472         banksel temp_wr 
000278 6E??           00473         movwf   temp_wr
00027A EC?? F???      00474         call    d_write
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00475 
                      00476 ;       banksel digitT4
                      00477 ;       movf    digitT4,W                       ;Get tens
                      00478 ;       call    bin_bcd
                      00479 ;       movf    LSD,W                   ;send low digit   x.x#
                      00480 ;       movwf   temp_wr
                      00481 ;       call    d_write
                      00482 ;
                      00483 ;       banksel digitT3
                      00484 ;       movf    digitT3,W                       ;Get tens
                      00485 ;       call    bin_bcd
                      00486 ;       movf    LSD,W                   ;send low digit   x.x#
                      00487 ;       movwf   temp_wr
                      00488 ;       call    d_write
                      00489 ;
                      00490 
00027E 010?           00491         banksel temp_wr 
000280 0E20           00492         movlw   A' '                    ; spaces        
000282 6E??           00493         movwf   temp_wr
000284 EC?? F???      00494         call    d_write
                      00495 
000288 010?           00496         banksel temp_wr 
00028A 0E56           00497         movlw   A'V'                    ;send "V" unit
00028C 6E??           00498         movwf   temp_wr
00028E EC?? F???      00499         call    d_write
                      00500 
                      00501 
                      00502 ;       movlw   A' '                    ; spaces        
                      00503 ;       movwf   temp_wr
                      00504 ;       call    d_write
                      00505 
000292 0012           00506         return
                      00507 
                      00508 
                      00509 
                      00510 
                      00511 
000294                00512 DisVForGain8
                      00513 
000294 010?           00514         banksel temp_wr 
000296 0E2E           00515         movlw   A'.'                    ;send decimal point "."
000298 6E??           00516         movwf   temp_wr
00029A EC?? F???      00517         call    d_write
                      00518 
00029E 010?           00519         banksel digitT12
0002A0 50??           00520         movf    digitT12,W                      ;Get Above decimal point (>4)
0002A2 EC?? F???      00521         call    bin_bcd
0002A6 010?           00522         banksel LSD
0002A8 50??           00523         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      00524 
0002AA 010?           00525         banksel temp_wr 
0002AC 6E??           00526         movwf   temp_wr
0002AE EC?? F???      00527         call    d_write
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00528 
                      00529 
0002B2 010?           00530         banksel digitT11
0002B4 50??           00531         movf    digitT11,W                      ;Get Above decimal point (>4)
0002B6 EC?? F???      00532         call    bin_bcd
0002BA 010?           00533         banksel LSD
0002BC 50??           00534         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      00535 
0002BE 010?           00536         banksel temp_wr 
0002C0 6E??           00537         movwf   temp_wr
0002C2 EC?? F???      00538         call    d_write
                      00539 
0002C6 010?           00540         banksel digitT10
0002C8 50??           00541         movf    digitT10,W                      ;Get Above decimal point (>4)
0002CA EC?? F???      00542         call    bin_bcd
0002CE 010?           00543         banksel LSD
0002D0 50??           00544         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      00545 
0002D2 010?           00546         banksel temp_wr 
0002D4 6E??           00547         movwf   temp_wr
0002D6 EC?? F???      00548         call    d_write
                      00549 
                      00550 
0002DA 010?           00551         banksel digitT9
0002DC 50??           00552         movf    digitT9,W                       ;below decimal point
0002DE EC?? F???      00553         call    bin_bcd
0002E2 010?           00554         banksel LSD
0002E4 50??           00555         movf    LSD,W                   ;send low digit   x.#x
                      00556 
0002E6 010?           00557         banksel temp_wr 
0002E8 6E??           00558         movwf   temp_wr
0002EA EC?? F???      00559         call    d_write
                      00560 
0002EE 010?           00561         banksel digitT8
0002F0 50??           00562         movf    digitT8,W                       ;Get hundreds
0002F2 EC?? F???      00563         call    bin_bcd
0002F6 010?           00564         banksel LSD
0002F8 50??           00565         movf    LSD,W                   ;send low digit   x.x#
                      00566 
0002FA 010?           00567         banksel temp_wr 
0002FC 6E??           00568         movwf   temp_wr
0002FE EC?? F???      00569         call    d_write
                      00570 
000302 010?           00571         banksel digitT7
000304 50??           00572         movf    digitT7,W                       ;Get tens
000306 EC?? F???      00573         call    bin_bcd
00030A 010?           00574         banksel LSD
00030C 50??           00575         movf    LSD,W                   ;send low digit   x.x#
                      00576 
00030E 010?           00577         banksel temp_wr 
000310 6E??           00578         movwf   temp_wr
000312 EC?? F???      00579         call    d_write
                      00580 
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000316 010?           00581         banksel digitT6
000318 50??           00582         movf    digitT6,W                       ;Get tens
00031A EC?? F???      00583         call    bin_bcd
00031E 010?           00584         banksel LSD
000320 50??           00585         movf    LSD,W                   ;send low digit   x.x#
                      00586 
000322 010?           00587         banksel temp_wr 
000324 6E??           00588         movwf   temp_wr
000326 EC?? F???      00589         call    d_write
                      00590 
                      00591 ;       banksel digitT5
                      00592 ;       movf    digitT5,W                       ;Get tens
                      00593 ;       call    bin_bcd
                      00594 ;       movf    LSD,W                   ;send low digit   x.x#
                      00595 ;       movwf   temp_wr
                      00596 ;       call    d_write
                      00597 ;
                      00598 ;
                      00599 ;       banksel digitT4
                      00600 ;       movf    digitT4,W                       ;Get tens
                      00601 ;       call    bin_bcd
                      00602 ;       movf    LSD,W                   ;send low digit   x.x#
                      00603 ;       movwf   temp_wr
                      00604 ;       call    d_write
                      00605 ;
                      00606 ;       banksel digitT3
                      00607 ;       movf    digitT3,W                       ;Get tens
                      00608 ;       call    bin_bcd
                      00609 ;       movf    LSD,W                   ;send low digit   x.x#
                      00610 ;       movwf   temp_wr
                      00611 ;       call    d_write
                      00612 
00032A 010?           00613         banksel temp_wr 
00032C 0E20           00614         movlw   A' '                    ; spaces        
00032E 6E??           00615         movwf   temp_wr
000330 EC?? F???      00616         call    d_write
                      00617 
000334 010?           00618         banksel temp_wr 
000336 0E56           00619         movlw   A'V'                    ;send "V" unit
000338 6E??           00620         movwf   temp_wr
00033A EC?? F???      00621         call    d_write
                      00622 
00033E 0012           00623         return
                      00624 
                      00625 ;------------------------------------------------------------------------------------
000340                00626 Display_Results_Current
                      00627 ;---------------------------------------
                      00628 ;               digitT1         ; ones
                      00629 ;               digitT2         ; tens
                      00630 ;               digitT3         ; hundreds
                      00631 ;               digitT4         ; thousands
                      00632 ;               digitT5         ; Ten_Thousands
                      00633 ;               digitT6         ; OneHundreds_Thousands
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00634 ;               digitT7         ; One_million
                      00635 ;               digitT8         ; Ten_million
                      00636 ;               digitT9         ; 
                      00637 ;               digitT10        ; MSB for Gain = 1
                      00638 ;               digitT11        ; ---> 
                      00639 ;               digitT12        ; --->MSB for Gain = 8
                      00640 ;               digitT13        ; --->0
                      00641 ;-------------------------------------------------------------------------------------------------------
                            ----
                      00642 ;
                      00643 ; digitT13-digitT12-digitT11-digitT10-digitT9-digitT8-digitT7-digitT6-digitT5-digitT4-digitT3-digitT2-di
                            gitT1
                      00644 ;  The Maximum value of MCP3421 is 4.096 V.
                      00645 
                      00646 ; 2^18 = 262,144 in decimal ==> 40000 hex --> 5 registers ===> display from digit5 to digit1
                      00647 
                      00648 ;---------------------------------------
                      00649 
000340 EC?? F???      00650         call    LCDLine_2               ;display A/D result on 2nd line
000344 0E49           00651         movlw   A'I'                    ;send "RB0=Exit" to LCD
                      00652 
                      00653 ;Continue_disp
000346 010?           00654         banksel temp_wr 
000348 6E??           00655         movwf   temp_wr
00034A EC?? F???      00656         call    d_write
                      00657 
00034E 010?           00658         banksel temp_wr 
000350 0E20           00659         movlw   A' '            
000352 6E??           00660         movwf   temp_wr
000354 EC?? F???      00661         call    d_write
                      00662 
000358 010?           00663         banksel temp_wr 
00035A 0E3D           00664         movlw   A'='            
00035C 6E??           00665         movwf   temp_wr
00035E EC?? F???      00666         call    d_write
                      00667         
000362 010?           00668         banksel temp_wr 
000364 0E20           00669         movlw   A' '            
000366 6E??           00670         movwf   temp_wr
000368 EC?? F???      00671         call    d_write
                      00672 
                      00673 ;----------------------------------------------------------
                      00674 
00036C 010?           00675         banksel ADC_Sign
00036E A0??           00676         btfss   ADC_Sign,0
000370 D???           00677         bra             Put_Negative_Sign_I
                      00678 ;       bra             Put_Positive_Sign_I
000372                00679 Put_Positive_Sign_I
000372 010?           00680         banksel temp_wr 
000374 0E2B           00681         movlw   A'+'                    ;send Positive Sign "+"
000376 6E??           00682         movwf   temp_wr
000378 EC?? F???      00683         call    d_write
00037C EF?? F???      00684         goto    Start_DisPlay_I_Values
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00685 
000380                00686 Put_Negative_Sign_I
000380 010?           00687         banksel temp_wr 
000382 0E2D           00688         movlw   A'-'                    ;send Positive Sign "-"
000384 6E??           00689         movwf   temp_wr
000386 EC?? F???      00690         call    d_write
                      00691         
00038A                00692 Start_DisPlay_I_Values
                      00693 
                      00694 ;---------------------------------
                      00695 
00038A 010?           00696         banksel Gain_Selected
                      00697 
00038C B0??           00698         btfsc   Gain_Selected,0
00038E D???           00699         bra             DisIForGain2
000390 B2??           00700         btfsc   Gain_Selected,1
000392 D???           00701         bra             DisIForGain4
000394 B4??           00702         btfsc   Gain_Selected,2
000396 D???           00703         bra             DisIForGain8
                      00704 ;---------------------------------
                      00705 
000398                00706 DisIForGain1
000398 010?           00707         banksel digitT7
00039A 50??           00708         movf    digitT7,W                       ;Get Above decimal point (>4)
00039C EC?? F???      00709         call    bin_bcd
                      00710 
0003A0 010?           00711         banksel LSD
0003A2 50??           00712         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      00713 
0003A4 010?           00714         banksel temp_wr 
0003A6 6E??           00715         movwf   temp_wr
0003A8 EC?? F???      00716         call    d_write
                      00717 
0003AC 010?           00718         banksel temp_wr 
0003AE 0E2E           00719         movlw   A'.'                    ;send decimal point "."
0003B0 6E??           00720         movwf   temp_wr
0003B2 EC?? F???      00721         call    d_write
                      00722 
0003B6 010?           00723         banksel digitT6
0003B8 50??           00724         movf    digitT6,W                       ;below decimal point
0003BA EC?? F???      00725         call    bin_bcd
0003BE 010?           00726         banksel LSD
0003C0 50??           00727         movf    LSD,W                   ;send low digit   x.#x
                      00728 
0003C2 010?           00729         banksel temp_wr 
0003C4 6E??           00730         movwf   temp_wr
0003C6 EC?? F???      00731         call    d_write
                      00732 
0003CA 010?           00733         banksel digitT5
0003CC 50??           00734         movf    digitT5,W                       ;Get hundreds
0003CE EC?? F???      00735         call    bin_bcd
0003D2 010?           00736         banksel LSD
0003D4 50??           00737         movf    LSD,W                   ;send low digit   x.x#
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00738 
0003D6 010?           00739         banksel temp_wr 
0003D8 6E??           00740         movwf   temp_wr
0003DA EC?? F???      00741         call    d_write
                      00742 
0003DE 010?           00743         banksel digitT4
0003E0 50??           00744         movf    digitT4,W                       ;Get tens
0003E2 EC?? F???      00745         call    bin_bcd
                      00746 
0003E6 010?           00747         banksel LSD
0003E8 50??           00748         movf    LSD,W                   ;send low digit   x.x#
                      00749 
0003EA 010?           00750         banksel temp_wr 
0003EC 6E??           00751         movwf   temp_wr
0003EE EC?? F???      00752         call    d_write
                      00753 
0003F2 010?           00754         banksel digitT3
0003F4 50??           00755         movf    digitT3,W                       ;Get tens
0003F6 EC?? F???      00756         call    bin_bcd
                      00757 
0003FA 010?           00758         banksel LSD
0003FC 50??           00759         movf    LSD,W                   ;send low digit   x.x#
                      00760 
0003FE 010?           00761         banksel temp_wr 
000400 6E??           00762         movwf   temp_wr
000402 EC?? F???      00763         call    d_write
                      00764 
000406 010?           00765         banksel digitT2
000408 50??           00766         movf    digitT2,W                       ;Get tens
00040A EC?? F???      00767         call    bin_bcd
00040E 010?           00768         banksel LSD
000410 50??           00769         movf    LSD,W                   ;send low digit   x.x#
                      00770 
000412 010?           00771         banksel temp_wr 
000414 6E??           00772         movwf   temp_wr
000416 EC?? F???      00773         call    d_write
                      00774 
                      00775 
00041A 010?           00776         banksel digitT1
00041C 50??           00777         movf    digitT1,W                       ;Get tens
00041E EC?? F???      00778         call    bin_bcd
000422 010?           00779         banksel LSD
000424 50??           00780         movf    LSD,W                   ;send low digit   x.x#
                      00781 
000426 010?           00782         banksel temp_wr 
000428 6E??           00783         movwf   temp_wr
00042A EC?? F???      00784         call    d_write
                      00785 
                      00786 
                      00787 ;       movlw   A'u'                    ;send "uA" unit
                      00788 ;       movwf   temp_wr
                      00789 ;       call    d_write
                      00790 
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00042E 010?           00791         banksel temp_wr 
000430 0E30           00792         movlw   A'0'                    ;send "uA" unit
000432 6E??           00793         movwf   temp_wr
000434 EC?? F???      00794         call    d_write
                      00795 
000438 010?           00796         banksel temp_wr 
00043A 0E20           00797         movlw   A' '                    ;send "uA" unit
00043C 6E??           00798         movwf   temp_wr
00043E EC?? F???      00799         call    d_write
                      00800 
000442 010?           00801         banksel temp_wr 
000444 0E41           00802         movlw   A'A'                    ;send "uA" unit
000446 6E??           00803         movwf   temp_wr
000448 EC?? F???      00804         call    d_write
                      00805 
00044C 0012           00806         return
                      00807 
                      00808 
00044E                00809 DisIForGain2
00044E 010?           00810         banksel digitT11
000450 50??           00811         movf    digitT11,W                      ;Get Above decimal point (>4)
000452 EC?? F???      00812         call    bin_bcd
                      00813 
000456 010?           00814         banksel LSD
000458 50??           00815         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      00816 
00045A 010?           00817         banksel temp_wr 
00045C 6E??           00818         movwf   temp_wr
00045E EC?? F???      00819         call    d_write
                      00820 
000462 010?           00821         banksel temp_wr 
000464 0E2E           00822         movlw   A'.'                    ;send decimal point "."
000466 6E??           00823         movwf   temp_wr
000468 EC?? F???      00824         call    d_write
                      00825 
00046C 010?           00826         banksel digitT10
00046E 50??           00827         movf    digitT10,W                      ;below decimal point
000470 EC?? F???      00828         call    bin_bcd
                      00829 
000474 010?           00830         banksel LSD
000476 50??           00831         movf    LSD,W                   ;send low digit   x.#x
                      00832 
000478 010?           00833         banksel temp_wr 
00047A 6E??           00834         movwf   temp_wr
00047C EC?? F???      00835         call    d_write
                      00836 
000480 010?           00837         banksel digitT9
000482 50??           00838         movf    digitT9,W                       ;below decimal point
000484 EC?? F???      00839         call    bin_bcd
000488 010?           00840         banksel LSD
00048A 50??           00841         movf    LSD,W                   ;send low digit   x.#x
                      00842 
00048C 010?           00843         banksel temp_wr 
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00048E 6E??           00844         movwf   temp_wr
000490 EC?? F???      00845         call    d_write
                      00846 
000494 50??           00847         movf    digitT8,W                       ;Get hundreds
000496 EC?? F???      00848         call    bin_bcd
                      00849 
00049A 010?           00850         banksel LSD
00049C 50??           00851         movf    LSD,W                   ;send low digit   x.x#
                      00852 
00049E 010?           00853         banksel temp_wr 
0004A0 6E??           00854         movwf   temp_wr
0004A2 EC?? F???      00855         call    d_write
                      00856 
0004A6 010?           00857         banksel digitT7
0004A8 50??           00858         movf    digitT7,W                       ;Get tens
0004AA EC?? F???      00859         call    bin_bcd
                      00860 
0004AE 010?           00861         banksel LSD
0004B0 50??           00862         movf    LSD,W                   ;send low digit   x.x#
                      00863 
0004B2 010?           00864         banksel temp_wr 
0004B4 6E??           00865         movwf   temp_wr
0004B6 EC?? F???      00866         call    d_write
                      00867 
0004BA 010?           00868         banksel digitT6
0004BC 50??           00869         movf    digitT6,W                       ;Get tens
0004BE EC?? F???      00870         call    bin_bcd
                      00871 
0004C2 010?           00872         banksel LSD
0004C4 50??           00873         movf    LSD,W                   ;send low digit   x.x#
                      00874 
0004C6 010?           00875         banksel temp_wr 
0004C8 6E??           00876         movwf   temp_wr
0004CA EC?? F???      00877         call    d_write
                      00878 
0004CE 010?           00879         banksel digitT5
0004D0 50??           00880         movf    digitT5,W                       ;Get tens
0004D2 EC?? F???      00881         call    bin_bcd
                      00882 
0004D6 010?           00883         banksel LSD
0004D8 50??           00884         movf    LSD,W                   ;send low digit   x.x#
                      00885 
0004DA 010?           00886         banksel temp_wr 
0004DC 6E??           00887         movwf   temp_wr
0004DE EC?? F???      00888         call    d_write
                      00889 
                      00890 
                      00891 ;       movf    digitT4,W                       ;Get tens
                      00892 ;       call    bin_bcd
                      00893 ;       movf    LSD,W                   ;send low digit   x.x#
                      00894 ;       movwf   temp_wr
                      00895 ;       call    d_write
                      00896 ;
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00897 ;       movf    digitT3,W                       ;Get tens
                      00898 ;       call    bin_bcd
                      00899 ;       movf    LSD,W                   ;send low digit   x.x#
                      00900 ;       movwf   temp_wr
                      00901 ;       call    d_write
                      00902 
                      00903 
                      00904 
0004E2 010?           00905         banksel temp_wr 
0004E4 0E28           00906         movlw   A'('                    ;send "uA" unit
0004E6 6E??           00907         movwf   temp_wr
0004E8 EC?? F???      00908         call    d_write
                      00909 
0004EC 010?           00910         banksel temp_wr 
0004EE 0E41           00911         movlw   A'A'                    ;send "uA" unit
0004F0 6E??           00912         movwf   temp_wr
0004F2 EC?? F???      00913         call    d_write
                      00914 
0004F6 010?           00915         banksel temp_wr 
0004F8 0E29           00916         movlw   A')'                    ;send "uA" unit
0004FA 6E??           00917         movwf   temp_wr
0004FC EC?? F???      00918         call    d_write
                      00919 
000500 0012           00920         return
                      00921 
                      00922 
000502                00923 DisIForGain4
                      00924 
000502 010?           00925         banksel digitT12
000504 50??           00926         movf    digitT12,W                      ;Get Above decimal point (>4)
000506 EC?? F???      00927         call    bin_bcd
                      00928 
00050A 010?           00929         banksel LSD
00050C 50??           00930         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      00931 
00050E 010?           00932         banksel temp_wr 
000510 6E??           00933         movwf   temp_wr
000512 EC?? F???      00934         call    d_write
                      00935 
                      00936 
                      00937 
000516 010?           00938         banksel temp_wr 
000518 0E2E           00939         movlw   A'.'                    ;send decimal point "."
00051A 6E??           00940         movwf   temp_wr
00051C EC?? F???      00941         call    d_write
                      00942 
000520 010?           00943         banksel digitT11
000522 50??           00944         movf    digitT11,W                      ;Get Above decimal point (>4)
000524 EC?? F???      00945         call    bin_bcd
                      00946 
000528 010?           00947         banksel LSD
00052A 50??           00948         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      00949 
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00052C 010?           00950         banksel temp_wr 
00052E 6E??           00951         movwf   temp_wr
000530 EC?? F???      00952         call    d_write
                      00953 
000534 010?           00954         banksel digitT10
000536 50??           00955         movf    digitT10,W                      ;Get Above decimal point (>4)
000538 EC?? F???      00956         call    bin_bcd
                      00957 
00053C 010?           00958         banksel LSD
00053E 50??           00959         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      00960 
000540 010?           00961         banksel temp_wr 
000542 6E??           00962         movwf   temp_wr
000544 EC?? F???      00963         call    d_write
                      00964 
                      00965 
000548 010?           00966         banksel digitT9
00054A 50??           00967         movf    digitT9,W                       ;below decimal point
00054C EC?? F???      00968         call    bin_bcd
                      00969 
000550 010?           00970         banksel LSD
000552 50??           00971         movf    LSD,W                   ;send low digit   x.#x
                      00972 
000554 010?           00973         banksel temp_wr 
000556 6E??           00974         movwf   temp_wr
000558 EC?? F???      00975         call    d_write
                      00976 
00055C 010?           00977         banksel digitT8
00055E 50??           00978         movf    digitT8,W                       ;Get hundreds
000560 EC?? F???      00979         call    bin_bcd
000564 010?           00980         banksel LSD
000566 50??           00981         movf    LSD,W                   ;send low digit   x.x#
                      00982 
000568 010?           00983         banksel temp_wr 
00056A 6E??           00984         movwf   temp_wr
00056C EC?? F???      00985         call    d_write
                      00986 
000570 010?           00987         banksel digitT7
000572 50??           00988         movf    digitT7,W                       ;Get tens
000574 EC?? F???      00989         call    bin_bcd
                      00990 
000578 010?           00991         banksel LSD
00057A 50??           00992         movf    LSD,W                   ;send low digit   x.x#
                      00993 
00057C 010?           00994         banksel temp_wr 
00057E 6E??           00995         movwf   temp_wr
000580 EC?? F???      00996         call    d_write
                      00997 
000584 010?           00998         banksel digitT6
000586 50??           00999         movf    digitT6,W                       ;Get tens
000588 EC?? F???      01000         call    bin_bcd
00058C 010?           01001         banksel LSD
00058E 50??           01002         movf    LSD,W                   ;send low digit   x.x#
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01003 
000590 010?           01004         banksel temp_wr 
000592 6E??           01005         movwf   temp_wr
000594 EC?? F???      01006         call    d_write
                      01007 
                      01008 ;       movf    digitT5,W                       ;Get tens
                      01009 ;       call    bin_bcd
                      01010 ;       movf    LSD,W                   ;send low digit   x.x#
                      01011 ;       movwf   temp_wr
                      01012 ;       call    d_write
                      01013 ;
                      01014 ;
                      01015 ;       movf    digitT4,W                       ;Get tens
                      01016 ;       call    bin_bcd
                      01017 ;       movf    LSD,W                   ;send low digit   x.x#
                      01018 ;       movwf   temp_wr
                      01019 ;       call    d_write
                      01020 ;
                      01021 ;       movf    digitT3,W                       ;Get tens
                      01022 ;       call    bin_bcd
                      01023 ;       movf    LSD,W                   ;send low digit   x.x#
                      01024 ;       movwf   temp_wr
                      01025 ;       call    d_write
                      01026 
                      01027 
000598 010?           01028         banksel temp_wr 
00059A 0E28           01029         movlw   A'('                    ;send "uA" unit
00059C 6E??           01030         movwf   temp_wr
00059E EC?? F???      01031         call    d_write
                      01032 
0005A2 010?           01033         banksel temp_wr 
0005A4 0E41           01034         movlw   A'A'                    ;send "uA" unit
0005A6 6E??           01035         movwf   temp_wr
0005A8 EC?? F???      01036         call    d_write
                      01037 
0005AC 010?           01038         banksel temp_wr 
0005AE 0E29           01039         movlw   A')'                    ;send "uA" unit
0005B0 6E??           01040         movwf   temp_wr
0005B2 EC?? F???      01041         call    d_write
0005B6 0012           01042         return
                      01043 
                      01044 
                      01045 
0005B8                01046 DisIForGain8
                      01047 
0005B8 010?           01048         banksel digitT13
0005BA 50??           01049         movf    digitT13,W                      ;Get Above decimal point (>4)
0005BC EC?? F???      01050         call    bin_bcd
                      01051 
0005C0 010?           01052         banksel LSD
0005C2 50??           01053         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      01054 
0005C4 010?           01055         banksel temp_wr 
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0005C6 6E??           01056         movwf   temp_wr
0005C8 EC?? F???      01057         call    d_write
                      01058 
0005CC 010?           01059         banksel temp_wr 
0005CE 0E2E           01060         movlw   A'.'                    ;send decimal point "."
0005D0 6E??           01061         movwf   temp_wr
0005D2 EC?? F???      01062         call    d_write
                      01063 
0005D6 010?           01064         banksel digitT6
0005D8 50??           01065         movf    digitT6,W                       ;Get tens
0005DA EC?? F???      01066         call    bin_bcd
                      01067 
0005DE 010?           01068         banksel LSD
0005E0 50??           01069         movf    LSD,W                   ;send low digit   x.x#
                      01070 
0005E2 010?           01071         banksel temp_wr 
0005E4 6E??           01072         movwf   temp_wr
0005E6 EC?? F???      01073         call    d_write
                      01074 
0005EA 010?           01075         banksel digitT5
0005EC 50??           01076         movf    digitT5,W                       ;Get tens
0005EE EC?? F???      01077         call    bin_bcd
                      01078 
0005F2 010?           01079         banksel LSD
0005F4 50??           01080         movf    LSD,W                   ;send low digit   x.x#
                      01081 
0005F6 010?           01082         banksel temp_wr 
0005F8 6E??           01083         movwf   temp_wr
0005FA EC?? F???      01084         call    d_write
                      01085 
                      01086 
0005FE 010?           01087         banksel digitT4
000600 50??           01088         movf    digitT4,W                       ;Get tens
000602 EC?? F???      01089         call    bin_bcd
                      01090 
000606 010?           01091         banksel LSD
000608 50??           01092         movf    LSD,W                   ;send low digit   x.x#
                      01093 
00060A 010?           01094         banksel temp_wr 
00060C 6E??           01095         movwf   temp_wr
00060E EC?? F???      01096         call    d_write
                      01097 
000612 010?           01098         banksel digitT3
000614 50??           01099         movf    digitT3,W                       ;Get tens
000616 EC?? F???      01100         call    bin_bcd
                      01101 
00061A 010?           01102         banksel LSD
00061C 50??           01103         movf    LSD,W                   ;send low digit   x.x#
                      01104 
00061E 010?           01105         banksel temp_wr 
000620 6E??           01106         movwf   temp_wr
000622 EC?? F???      01107         call    d_write
                      01108 
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000626 010?           01109         banksel digitT2
000628 50??           01110         movf    digitT2,W                       ;Get tens
00062A EC?? F???      01111         call    bin_bcd
                      01112 
00062E 010?           01113         banksel LSD
000630 50??           01114         movf    LSD,W                   ;send low digit   x.x#
                      01115 
000632 010?           01116         banksel temp_wr 
000634 6E??           01117         movwf   temp_wr
000636 EC?? F???      01118         call    d_write
                      01119 
00063A 010?           01120         banksel digitT1
00063C 50??           01121         movf    digitT1,W                       ;Get tens
00063E EC?? F???      01122         call    bin_bcd
                      01123 
000642 010?           01124         banksel LSD
000644 50??           01125         movf    LSD,W                   ;send low digit   x.x#
                      01126 
000646 010?           01127         banksel temp_wr 
000648 6E??           01128         movwf   temp_wr
00064A EC?? F???      01129         call    d_write
                      01130 
00064E 010?           01131         banksel temp_wr 
000650 0E30           01132         movlw   A'0'                    ;send "uA" unit
000652 6E??           01133         movwf   temp_wr
000654 EC?? F???      01134         call    d_write
                      01135 
000658 010?           01136         banksel temp_wr 
00065A 0E20           01137         movlw   A' '                    ;send "uA" unit
00065C 6E??           01138         movwf   temp_wr
00065E EC?? F???      01139         call    d_write
                      01140 
000662 010?           01141         banksel temp_wr 
000664 0E41           01142         movlw   A'A'                    ;send "uA" unit
000666 6E??           01143         movwf   temp_wr
000668 EC?? F???      01144         call    d_write
00066C 0012           01145         return
                      01146 
                      01147 
                      01148 
                      01149 
                      01150 ;--------------------------------------------------------------------------------------
                      01151 
                      01152 
00066E                01153 Disp_FuelRemPerct
                      01154 ;/* Display Fuel Remain in Percentage */
                      01155 
                      01156 ;---------------------------------------
                      01157 ;               digitT1         ; ones
                      01158 ;               digitT2         ; tens
                      01159 ;               digitT3         ; hundreds
                      01160 ;               digitT4         ; thousands
                      01161 ;               digitT5         ; Ten_Thousands
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01162 ;               digitT6         ; OneHundreds_Thousands
                      01163 ;               digitT7         ; One_million
                      01164 ;               digitT8         ; Ten_million
                      01165 ;               digitT9         ; 
                      01166 ;               digitT10        ; MSB for Gain = 1
                      01167 ;               digitT11        ; ---> 
                      01168 ;               digitT12        ; --->MSB for Gain = 8
                      01169 ;               digitT13        ; --->0
                      01170 ;-------------------------------------------------------------------------------------------------------
                            ----
                      01171 ;
                      01172 ; digitT13-digitT12-digitT11-digitT10-digitT9-digitT8-digitT7-digitT6-digitT5-digitT4-digitT3-digitT2-di
                            gitT11
                      01173 ;  The Maximum value of MCP3421 is 4.096 V.
                      01174 
                      01175 ; 2^18 = 262,144 in decimal ==> 40000 hex --> 5 registers ===> display from digit5 to digit1
                      01176 
                      01177 ;---------------------------------------
                      01178 
                      01179 
                      01180 ;       banksel Its_RemaFuel
                      01181 ;       btfss           Its_RemaFuel,0
                      01182 ;       goto            DispFuelUsed
                      01183 ;DispFuelRemaining
                      01184 
00066E EC?? F???      01185         call    LCDLine_1       
                      01186 
000672 010?           01187         banksel temp_wr 
000674 0E20           01188         movlw   A' '            
000676 6E??           01189         movwf   temp_wr
000678 EC?? F???      01190         call    d_write
                      01191 
00067C 010?           01192         banksel temp_wr 
00067E 0E20           01193         movlw   A' '            
000680 6E??           01194         movwf   temp_wr
000682 EC?? F???      01195         call    d_write
                      01196         
000686 010?           01197         banksel temp_wr 
000688 0E46           01198         movlw   A'F'                    
00068A 6E??           01199         movwf   temp_wr
00068C EC?? F???      01200         call    d_write
                      01201 
000690 010?           01202         banksel temp_wr 
000692 0E75           01203         movlw   A'u'                    
000694 6E??           01204         movwf   temp_wr
000696 EC?? F???      01205         call    d_write
                      01206 
00069A 010?           01207         banksel temp_wr 
00069C 0E65           01208         movlw   A'e'                    
00069E 6E??           01209         movwf   temp_wr
0006A0 EC?? F???      01210         call    d_write
                      01211 
0006A4 010?           01212         banksel temp_wr 
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0006A6 0E6C           01213         movlw   A'l'                    
0006A8 6E??           01214         movwf   temp_wr
0006AA EC?? F???      01215         call    d_write
                      01216 
                      01217 ;       movlw   A'R'            
                      01218 ;       movwf   temp_wr
                      01219 ;       call    d_write
                      01220 ;       movlw   A'e'            
                      01221 ;       movwf   temp_wr
                      01222 ;       call    d_write
                      01223 ;       
                      01224 ;       movlw   A'm'                    
                      01225 ;       movwf   temp_wr
                      01226 ;       call    d_write
                      01227 ;       movlw   A'a'            
                      01228 ;       movwf   temp_wr
                      01229 ;       call    d_write
                      01230 ;       movlw   A'i'            
                      01231 ;       movwf   temp_wr
                      01232 ;       call    d_write
                      01233 ;       movlw   A'n'            
                      01234 ;       movwf   temp_wr
                      01235 ;       call    d_write
                      01236 ;
0006AE 010?           01237         banksel temp_wr 
0006B0 0E3D           01238         movlw   A'='            
0006B2 6E??           01239         movwf   temp_wr
0006B4 EC?? F???      01240         call    d_write
                      01241 
                      01242 
                      01243 ;----------------------------------------------------------
                      01244 
                      01245 
                      01246 ;       banksel digitT10
                      01247 ;       movf    digitT10,W                      ;Get Above decimal point (>4)
                      01248 ;       call    bin_bcd
                      01249 ;       movf    LSD,W                   ;send high digit from the LSD #.xx      
                      01250 ;       movwf   temp_wr
                      01251 ;       call    d_write
                      01252 ;
                      01253 ;       banksel digitT9
                      01254 ;       movf    digitT8,W                       ;Get Above decimal point (>4)
                      01255 ;       call    bin_bcd
                      01256 ;       movf    LSD,W                   ;send high digit from the LSD #.xx      
                      01257 ;       movwf   temp_wr
                      01258 ;       call    d_write
                      01259 ;
                      01260 ;       banksel digitT8
                      01261 ;       movf    digitT8,W                       ;Get Above decimal point (>4)
                      01262 ;       call    bin_bcd
                      01263 ;       movf    LSD,W                   ;send high digit from the LSD #.xx      
                      01264 ;       movwf   temp_wr
                      01265 ;       call    d_write
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01266 ;
                      01267 ;       banksel digitT7
                      01268 ;       movf    digitT7,W                       ;Get Above decimal point (>4)
                      01269 ;       call    bin_bcd
                      01270 ;       movf    LSD,W                   ;send high digit from the LSD #.xx      
                      01271 ;       movwf   temp_wr
                      01272 ;       call    d_write
                      01273 ;
                      01274 
                      01275 ;------------------------------------
0006B8 010?           01276         banksel digitT6
0006BA 0EFF           01277         movlw   0xff
0006BC 1400           01278         andwf   digitT6,0
0006BE B4D8           01279         btfsc   STATUS,Z        ; Z -->1: Register is zero, Z -->0: Register is not zero
0006C0 EF?? F???      01280         goto    LessThan_99Pcnt  
                      01281 ;------------------------------------
                      01282 
0006C4 010?           01283         banksel digitT6
0006C6 50??           01284         movf    digitT6,W               ; Checking 100% - 900*  
0006C8 EC?? F???      01285         call    bin_bcd
                      01286 
0006CC 010?           01287         banksel LSD
0006CE 50??           01288         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      01289 
0006D0 010?           01290         banksel temp_wr 
0006D2 6E??           01291         movwf   temp_wr
0006D4 EC?? F???      01292         call    d_write
                      01293 
0006D8                01294 LessThan_99Pcnt
0006D8 010?           01295         banksel digitT5
0006DA 50??           01296         movf    digitT5,W                       
0006DC EC?? F???      01297         call    bin_bcd
                      01298 
0006E0 010?           01299         banksel LSD
0006E2 50??           01300         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      01301 
0006E4 010?           01302         banksel temp_wr 
0006E6 6E??           01303         movwf   temp_wr
0006E8 EC?? F???      01304         call    d_write
                      01305 
0006EC 010?           01306         banksel digitT4
0006EE 50??           01307         movf    digitT4,W                       
0006F0 EC?? F???      01308         call    bin_bcd
                      01309 
0006F4 010?           01310         banksel LSD
0006F6 50??           01311         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      01312 
0006F8 010?           01313         banksel temp_wr 
0006FA 6E??           01314         movwf   temp_wr
0006FC EC?? F???      01315         call    d_write
                      01316 
000700 010?           01317         banksel temp_wr 
000702 0E2E           01318         movlw   A'.'            
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 27


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000704 6E??           01319         movwf   temp_wr
000706 EC?? F???      01320         call    d_write
                      01321 
                      01322 
00070A 010?           01323         banksel digitT3
00070C 50??           01324         movf    digitT3,W                       
00070E EC?? F???      01325         call    bin_bcd
                      01326 
000712 010?           01327         banksel LSD
000714 50??           01328         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      01329 
000716 010?           01330         banksel temp_wr 
000718 6E??           01331         movwf   temp_wr
00071A EC?? F???      01332         call    d_write
                      01333 ;----------------------------
00071E 010?           01334         banksel digitT2
000720 50??           01335         movf    digitT2,W                       ;below decimal point
000722 EC?? F???      01336         call    bin_bcd
                      01337 
000726 010?           01338         banksel LSD
000728 50??           01339         movf    LSD,W                           ;send low digit   x.#x
                      01340 
00072A 010?           01341         banksel temp_wr 
00072C 6E??           01342         movwf   temp_wr
00072E EC?? F???      01343         call    d_write
                      01344 
000732 010?           01345         banksel digitT1
000734 50??           01346         movf    digitT1,W                       ;Get hundreds
000736 EC?? F???      01347         call    bin_bcd
00073A 010?           01348         banksel LSD
00073C 50??           01349         movf    LSD,W                           ;send low digit   x.x#
                      01350 
00073E 010?           01351         banksel temp_wr 
000740 6E??           01352         movwf   temp_wr         
000742 EC?? F???      01353         call    d_write
                      01354 ;
                      01355 
000746 010?           01356         banksel temp_wr 
000748 0E25           01357         movlw   A'%'            
00074A 6E??           01358         movwf   temp_wr
00074C EC?? F???      01359         call    d_write
                      01360 
                      01361 
000750 010?           01362         banksel temp_wr 
000752 0E20           01363         movlw   A' '            
000754 6E??           01364         movwf   temp_wr
000756 EC?? F???      01365         call    d_write
                      01366 
00075A 010?           01367         banksel temp_wr 
00075C 0E20           01368         movlw   A' '            
00075E 6E??           01369         movwf   temp_wr
000760 EC?? F???      01370         call    d_write
                      01371 
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 28


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01372 ;       movlw   A' '            
                      01373 ;       movwf   temp_wr
                      01374 ;       call    d_write
                      01375 ;       movlw   A' '            
                      01376 ;       movwf   temp_wr
                      01377 ;       call    d_write
                      01378 
000764 0012           01379         return
                      01380 
000766                01381 Disp_FuelRemmAH
                      01382 ;/* Display Fuel Remain in mAH */
                      01383 
                      01384 ;---------------------------------------
                      01385 ;               digitT1         ; ones
                      01386 ;               digitT2         ; tens
                      01387 ;               digitT3         ; hundreds
                      01388 ;               digitT4         ; thousands
                      01389 ;               digitT5         ; Ten_Thousands
                      01390 ;               digitT6         ; OneHundreds_Thousands
                      01391 ;               digitT7         ; One_million
                      01392 ;               digitT8         ; Ten_million
                      01393 ;               digitT9         ; 
                      01394 ;               digitT10        ; MSB for Gain = 1
                      01395 ;               digitT11        ; ---> 
                      01396 ;               digitT12        ; --->MSB for Gain = 8
                      01397 ;               digitT13        ; --->0
                      01398 ;-------------------------------------------------------------------------------------------------------
                            ----
                      01399 ;
                      01400 ; digitT13-digitT12-digitT11-digitT10-digitT9-digitT8-digitT7-digitT6-digitT5-digitT4-digitT3-digitT2-di
                            gitT1
                      01401 ;  The Maximum value of MCP3421 is 4.096 V.
                      01402 ;---------------------------------------
000766 010?           01403         banksel FoundFistDigit
000768 6A??           01404         clrf    FoundFistDigit
                      01405 
00076A EC?? F???      01406         call    LCDLine_2               
                      01407         
                      01408 
00076E 010?           01409         banksel temp_wr 
000770 0E20           01410         movlw   A' '            
000772 6E??           01411         movwf   temp_wr
000774 EC?? F???      01412         call    d_write
                      01413 
000778 010?           01414         banksel temp_wr 
00077A 0E20           01415         movlw   A' '            
00077C 6E??           01416         movwf   temp_wr
00077E EC?? F???      01417         call    d_write
                      01418 
000782 010?           01419         banksel temp_wr 
000784 0E20           01420         movlw   A' '            
000786 6E??           01421         movwf   temp_wr
000788 EC?? F???      01422         call    d_write
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 29


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01423 
00078C 010?           01424         banksel temp_wr 
00078E 0E20           01425         movlw   A' '            
000790 6E??           01426         movwf   temp_wr
000792 EC?? F???      01427         call    d_write
                      01428 
000796 010?           01429         banksel temp_wr 
000798 0E28           01430         movlw   A'('            
00079A 6E??           01431         movwf   temp_wr
00079C EC?? F???      01432         call    d_write
                      01433 
                      01434 
                      01435 
                      01436 
0007A0 010?           01437         banksel digitT4
                      01438 
                      01439 ;   checking if the register is empty or not: digitT4 + digitT3 + digitT2 + digitT1
                      01440 ;------------------------------------
                      01441 
0007A2 0EFF           01442         movlw   b'11111111'
0007A4 1400           01443         andwf   digitT4,0
0007A6 B4D8           01444         btfsc   STATUS,Z        ; Z -->1: Register is zero, Z -->0: Register is not zero
0007A8 EF?? F???      01445         goto    ChekDigitT3_RFuel                
                      01446 ;------------------------------------
0007AC 010?           01447         banksel digitT4
0007AE 50??           01448         movf    digitT4,W                       ;Register is not zero --> decimal point should be after 
                            digitT6!
0007B0 EC?? F???      01449         call    bin_bcd
0007B4 010?           01450         banksel LSD
0007B6 50??           01451         movf    LSD,W                           ;send high digit from the LSD #.xx      
                      01452 
0007B8 010?           01453         banksel temp_wr 
0007BA 6E??           01454         movwf   temp_wr
0007BC EC?? F???      01455         call    d_write
                      01456 
0007C0 010?           01457         banksel FoundFistDigit
0007C2 80??           01458         bsf             FoundFistDigit,0
                      01459 
0007C4                01460 ChekDigitT3_RFuel
0007C4 010?           01461         banksel FoundFistDigit
0007C6 B0??           01462         btfsc   FoundFistDigit,0        
0007C8 EF?? F???      01463         goto    digitT3_RFuel
                      01464 
0007CC 010?           01465         banksel digitT3
                      01466 ;   checking if the register is empty or not:
                      01467 ;------------------------------------
0007CE 0EFF           01468         movlw   b'11111111'
0007D0 1400           01469         andwf   digitT3,0
0007D2 B4D8           01470         btfsc   STATUS,Z        ; Z -->1: Register is zero, Z -->0: Register is not zero
0007D4 EF?? F???      01471         goto    ChekDigitT2_RFuel        
                      01472 ;------------------------------------
0007D8                01473 digitT3_RFuel
0007D8 010?           01474         banksel digitT3
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 30


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0007DA 50??           01475         movf    digitT3,W                       ;Get Above decimal point (>4)
0007DC EC?? F???      01476         call    bin_bcd
                      01477 
0007E0 010?           01478         banksel LSD
0007E2 50??           01479         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      01480 
0007E4 010?           01481         banksel temp_wr 
0007E6 6E??           01482         movwf   temp_wr
0007E8 EC?? F???      01483         call    d_write
0007EC 010?           01484         banksel FoundFistDigit
0007EE 80??           01485         bsf             FoundFistDigit,0
                      01486 
                      01487 
0007F0                01488 ChekDigitT2_RFuel
0007F0 010?           01489         banksel FoundFistDigit
0007F2 B0??           01490         btfsc   FoundFistDigit,0        
0007F4 EF?? F???      01491         goto    digitT2_RFuel
0007F8 010?           01492         banksel digitT2
                      01493 ;   checking if the register is empty or not:
                      01494 ;------------------------------------
                      01495 
0007FA 0EFF           01496         movlw   b'11111111'
0007FC 1400           01497         andwf   digitT2,0
0007FE B4D8           01498         btfsc   STATUS,Z        ; Z -->1: Register is zero, Z -->0: Register is not zero
000800 EF?? F???      01499         goto    ChekDigitT1_RFuel        
                      01500 ;------------------------------------
000804                01501 digitT2_RFuel
000804 010?           01502         banksel digitT2
000806 50??           01503         movf    digitT2,W                       ;Get Above decimal point (>4)
000808 EC?? F???      01504         call    bin_bcd
                      01505 
00080C 010?           01506         banksel LSD
00080E 50??           01507         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      01508 
000810 010?           01509         banksel temp_wr 
000812 6E??           01510         movwf   temp_wr
000814 EC?? F???      01511         call    d_write
000818 010?           01512         banksel FoundFistDigit
00081A 80??           01513         bsf             FoundFistDigit,0
                      01514 
00081C                01515 ChekDigitT1_RFuel
00081C 010?           01516         banksel digitT1
00081E 50??           01517         movf    digitT1,W                       ;Get Above decimal point (>4)
000820 EC?? F???      01518         call    bin_bcd
                      01519 
000824 010?           01520         banksel LSD
000826 50??           01521         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      01522 
000828 010?           01523         banksel temp_wr 
00082A 6E??           01524         movwf   temp_wr
00082C EC?? F???      01525         call    d_write
                      01526 
000830 010?           01527         banksel FoundFistDigit
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 31


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000832 90??           01528         bcf             FoundFistDigit,0
                      01529 
                      01530         
                      01531 
000834 010?           01532         banksel temp_wr 
000836 0E20           01533         movlw   A' '            
000838 6E??           01534         movwf   temp_wr
00083A EC?? F???      01535         call    d_write
                      01536 
00083E 010?           01537         banksel temp_wr 
000840 0E6D           01538         movlw   A'm'            
000842 6E??           01539         movwf   temp_wr
000844 EC?? F???      01540         call    d_write
                      01541 
000848 010?           01542         banksel temp_wr 
00084A 0E41           01543         movlw   A'A'            
00084C 6E??           01544         movwf   temp_wr
00084E EC?? F???      01545         call    d_write
                      01546 
000852 010?           01547         banksel temp_wr 
000854 0E68           01548         movlw   A'h'            
000856 6E??           01549         movwf   temp_wr
000858 EC?? F???      01550         call    d_write
                      01551 
00085C 010?           01552         banksel temp_wr 
00085E 0E29           01553         movlw   A')'            
000860 6E??           01554         movwf   temp_wr
000862 EC?? F???      01555         call    d_write
                      01556 
000866 010?           01557         banksel temp_wr 
000868 0E20           01558         movlw   A' '            
00086A 6E??           01559         movwf   temp_wr
00086C EC?? F???      01560         call    d_write
                      01561 
000870 010?           01562         banksel temp_wr 
000872 0E20           01563         movlw   A' '            
000874 6E??           01564         movwf   temp_wr
000876 EC?? F???      01565         call    d_write
                      01566 
00087A 010?           01567         banksel temp_wr 
00087C 0E20           01568         movlw   A' '            
00087E 6E??           01569         movwf   temp_wr
000880 EC?? F???      01570         call    d_write
                      01571 
                      01572 
000884 0012           01573         return
                      01574 
                      01575 
                      01576 
                      01577 
                      01578 
                      01579 
000886                01580 Display_FuelUsed
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 32


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01581 
                      01582 ;/* Display Fuel Used */
                      01583 
                      01584 ;---------------------------------------------------    
                      01585 ; for 1000.xxxx mAh ----> (digitT9 + digitT8 + digitT7 + digitT6) . digitT5 + digitT4 +digitT3 + .. 
                      01586 ; Period --> after digitT6 !!
                      01587 ;---------------------------------------------------
                      01588 
                      01589 
000886 010?           01590         banksel FoundFistDigit
000888 6A00           01591         clrf    FoundFistDigit,0
                      01592 
                      01593 
                      01594 ;---------------------------------------
                      01595 ;               digitT1         ; ones
                      01596 ;               digitT2         ; tens
                      01597 ;               digitT3         ; hundreds
                      01598 ;               digitT4         ; thousands
                      01599 ;               digitT5         ; Ten_Thousands
                      01600 ;               digitT6         ; OneHundreds_Thousands
                      01601 ;               digitT7         ; One_million
                      01602 ;               digitT8         ; Ten_million
                      01603 ;               digitT9         ; 
                      01604 ;               digitT10        ; MSB for Gain = 1
                      01605 ;               digitT11        ; ---> 
                      01606 ;               digitT12        ; --->MSB for Gain = 8
                      01607 ;               digitT13        ; --->0
                      01608 ;-------------------------------------------------------------------------------------------------------
                            ----
                      01609 ;
                      01610 ; digitT13-digitT12-digitT11-digitT10-digitT9-digitT8-digitT7-digitT6-digitT5-digitT4-digitT3-digitT2-di
                            gitT11
                      01611 ;  The Maximum value of MCP3421 is 4.096 V.
                      01612 
                      01613 ; 2^18 = 262,144 in decimal ==> 40000 hex --> 5 registers ===> display from digit5 to digit1
                      01614 
                      01615 ;---------------------------------------
                      01616 
                      01617 
00088A EC?? F???      01618         call    LCDLine_1       
                      01619 
00088E 010?           01620         banksel temp_wr 
000890 0E20           01621         movlw   A' '                    
000892 6E??           01622         movwf   temp_wr
000894 EC?? F???      01623         call    d_write 
                      01624         
000898 010?           01625         banksel temp_wr 
00089A 0E20           01626         movlw   A' '                    
00089C 6E??           01627         movwf   temp_wr
00089E EC?? F???      01628         call    d_write 
                      01629 
0008A2 010?           01630         banksel temp_wr 
0008A4 0E20           01631         movlw   A' '                    
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 33


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0008A6 6E??           01632         movwf   temp_wr
0008A8 EC?? F???      01633         call    d_write 
                      01634 
0008AC 010?           01635         banksel temp_wr 
0008AE 0E46           01636         movlw   A'F'                    
0008B0 6E??           01637         movwf   temp_wr
0008B2 EC?? F???      01638         call    d_write
0008B6 0E75           01639         movlw   A'u'                    
0008B8 6E??           01640         movwf   temp_wr
0008BA EC?? F???      01641         call    d_write
0008BE 0E65           01642         movlw   A'e'                    
0008C0 6E??           01643         movwf   temp_wr
0008C2 EC?? F???      01644         call    d_write
0008C6 0E6C           01645         movlw   A'l'                    
0008C8 6E??           01646         movwf   temp_wr
0008CA EC?? F???      01647         call    d_write
                      01648 
0008CE 0E20           01649         movlw   A' '                    
0008D0 6E??           01650         movwf   temp_wr
0008D2 EC?? F???      01651         call    d_write
                      01652 
0008D6 0E55           01653         movlw   A'U'                    
0008D8 6E??           01654         movwf   temp_wr
0008DA EC?? F???      01655         call    d_write
0008DE 0E73           01656         movlw   A's'            
0008E0 6E??           01657         movwf   temp_wr
0008E2 EC?? F???      01658         call    d_write
0008E6 0E65           01659         movlw   A'e'            
0008E8 6E??           01660         movwf   temp_wr
0008EA EC?? F???      01661         call    d_write
0008EE 0E64           01662         movlw   A'd'            
0008F0 6E??           01663         movwf   temp_wr
0008F2 EC?? F???      01664         call    d_write
                      01665 
                      01666 
0008F6 0E3A           01667         movlw   A':'            
0008F8 6E??           01668         movwf   temp_wr
0008FA EC?? F???      01669         call    d_write
                      01670 
0008FE 0E20           01671         movlw   A' '                    
000900 6E??           01672         movwf   temp_wr
000902 EC?? F???      01673         call    d_write 
                      01674         
000906 0E20           01675         movlw   A' '                    
000908 6E??           01676         movwf   temp_wr
00090A EC?? F???      01677         call    d_write 
                      01678 
00090E 0E20           01679         movlw   A' '                    
000910 6E??           01680         movwf   temp_wr
000912 EC?? F???      01681         call    d_write 
                      01682 
                      01683 ;       movlw   A' '                    
                      01684 ;       movwf   temp_wr
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 34


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01685 ;       call    d_write 
                      01686 
                      01687 ;       movlw   A' '                    
                      01688 ;       movwf   temp_wr
                      01689 ;       call    d_write 
                      01690 ;       movlw   A' '                    
                      01691 ;       movwf   temp_wr
                      01692 ;       call    d_write 
                      01693 ;       movlw   A' '                    
                      01694 ;       movwf   temp_wr
                      01695 ;       call    d_write 
                      01696 
                      01697 ;---------------------------------------------------
000916 EC?? F???      01698         call    LCDLine_2       
                      01699 ;---------------------------------------------------    
                      01700 ; for 1000.xxxx mAh ----> (digitT9 + digitT8 + digitT7 + digitT6) . digitT5 + digitT4 +digitT3 + .. 
                      01701 ; Period --> after digitT6 !!
                      01702 ;---------------------------------------------------
                      01703 
                      01704 
00091A 010?           01705         banksel temp_wr
                      01706 
                      01707 
00091C 0E20           01708         movlw   A' '                    
00091E 6E??           01709         movwf   temp_wr
000920 EC?? F???      01710         call    d_write 
                      01711         
000924 0E20           01712         movlw   A' '                    
000926 6E??           01713         movwf   temp_wr
000928 EC?? F???      01714         call    d_write 
                      01715 
00092C 0E20           01716         movlw   A' '                    
00092E 6E??           01717         movwf   temp_wr
000930 EC?? F???      01718         call    d_write 
                      01719 
                      01720 ;   checking if the register is empty or not:
                      01721 ;------------------------------------
000934 010?           01722         banksel digitT10
                      01723 
000936 0EFF           01724         movlw   b'11111111'
000938 1400           01725         andwf   digitT10,0
00093A B4D8           01726         btfsc   STATUS,Z        ; Z -->1: Register is zero, Z -->0: Register is not zero
00093C EF?? F???      01727         goto    ChekDigitT9_UsedF                
                      01728 ;------------------------------------
000940 010?           01729         banksel digitT10
000942 50??           01730         movf    digitT10,W                      ;Register is not zero --> decimal point should be after 
                            digitT6!
000944 EC?? F???      01731         call    bin_bcd
000948 010?           01732         banksel LSD
00094A 50??           01733         movf    LSD,W                           ;send high digit from the LSD #.xx      
                      01734 
00094C 010?           01735         banksel temp_wr 
00094E 6E??           01736         movwf   temp_wr
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 35


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000950 EC?? F???      01737         call    d_write
                      01738 
000954 010?           01739         banksel FoundFistDigit
000956 80??           01740         bsf             FoundFistDigit,0
                      01741 
                      01742 ;--------------------------------------------------------------
000958                01743 ChekDigitT9_UsedF
000958 010?           01744         banksel FoundFistDigit
00095A B0??           01745         btfsc   FoundFistDigit,0        
00095C EF?? F???      01746         goto    digitT9_used
000960 010?           01747         banksel digitT9
                      01748 ;   checking if the register is empty or not:
                      01749 ;------------------------------------
000962 0EFF           01750         movlw   b'11111111'
000964 1400           01751         andwf   digitT9,0
000966 B4D8           01752         btfsc   STATUS,Z        ; Z -->1: Register is zero, Z -->0: Register is not zero
000968 EF?? F???      01753         goto    ChekDigitT8_UsedF        
                      01754 ;------------------------------------
00096C                01755 digitT9_used
00096C 010?           01756         banksel digitT9
00096E 50??           01757         movf    digitT9,W                       ;Get Above decimal point (>4)
000970 EC?? F???      01758         call    bin_bcd
000974 010?           01759         banksel LSD
000976 50??           01760         movf    LSD,W                           ;send high digit from the LSD #.xx      
                      01761 
000978 010?           01762         banksel temp_wr 
00097A 6E??           01763         movwf   temp_wr
00097C EC?? F???      01764         call    d_write
000980 010?           01765         banksel FoundFistDigit
000982 80??           01766         bsf             FoundFistDigit,0
                      01767 
                      01768 
                      01769 ;--------------------------------------------------------------
                      01770 
000984                01771 ChekDigitT8_UsedF
000984 010?           01772         banksel FoundFistDigit
000986 B0??           01773         btfsc   FoundFistDigit,0        
000988 EF?? F???      01774         goto    digitT8_used
00098C 010?           01775         banksel digitT8
                      01776 ;   checking if the register is empty or not:
                      01777 ;------------------------------------
00098E 0EFF           01778         movlw   b'11111111'
000990 1400           01779         andwf   digitT8,0
000992 B4D8           01780         btfsc   STATUS,Z        ; Z -->1: Register is zero, Z -->0: Register is not zero
000994 EF?? F???      01781         goto    ChekDigitT7_UsedF        
                      01782 ;------------------------------------
000998                01783 digitT8_used
000998 010?           01784         banksel digitT8
00099A 50??           01785         movf    digitT8,W                       ;Get Above decimal point (>4)
00099C EC?? F???      01786         call    bin_bcd
                      01787 
0009A0 010?           01788         banksel LSD
0009A2 50??           01789         movf    LSD,W                   ;send high digit from the LSD #.xx      
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 36


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01790 
0009A4 010?           01791         banksel temp_wr 
0009A6 6E??           01792         movwf   temp_wr
0009A8 EC?? F???      01793         call    d_write
                      01794 
0009AC 010?           01795         banksel FoundFistDigit
0009AE 80??           01796         bsf             FoundFistDigit,0
                      01797 
                      01798 
0009B0                01799 ChekDigitT7_UsedF
0009B0 010?           01800         banksel FoundFistDigit
0009B2 B0??           01801         btfsc   FoundFistDigit,0        
0009B4 EF?? F???      01802         goto    digitT7_used
0009B8 010?           01803         banksel digitT7
                      01804 ;   checking if the register is empty or not:
                      01805 ;------------------------------------
                      01806 
0009BA 0EFF           01807         movlw   b'11111111'
0009BC 1400           01808         andwf   digitT7,0
0009BE B4D8           01809         btfsc   STATUS,Z        ; Z -->1: Register is zero, Z -->0: Register is not zero
0009C0 EF?? F???      01810         goto    ChekDigitT6_UsedF        
                      01811 ;------------------------------------
0009C4                01812 digitT7_used
0009C4 010?           01813         banksel digitT7
0009C6 50??           01814         movf    digitT7,W                       ;Get Above decimal point (>4)
0009C8 EC?? F???      01815         call    bin_bcd
0009CC 010?           01816         banksel LSD
0009CE 50??           01817         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      01818 
0009D0 010?           01819         banksel temp_wr 
0009D2 6E??           01820         movwf   temp_wr
0009D4 EC?? F???      01821         call    d_write
                      01822 
0009D8                01823 ChekDigitT6_UsedF
0009D8 010?           01824         banksel digitT6
0009DA 50??           01825         movf    digitT6,W                       ;Get Above decimal point (>4)
0009DC EC?? F???      01826         call    bin_bcd
                      01827 
0009E0 010?           01828         banksel LSD
0009E2 50??           01829         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      01830 
0009E4 010?           01831         banksel temp_wr 
0009E6 6E??           01832         movwf   temp_wr
0009E8 EC?? F???      01833         call    d_write
                      01834 
0009EC 010?           01835         banksel FoundFistDigit
0009EE 90??           01836         bcf             FoundFistDigit,0
                      01837 
                      01838 
                      01839 ;-----------------------------
                      01840 ; decimal point in here for 1000 mAH 
0009F0 010?           01841         banksel temp_wr 
0009F2 0E2E           01842         movlw   A'.'            
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 37


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0009F4 6E??           01843         movwf   temp_wr
0009F6 EC?? F???      01844         call    d_write
                      01845 ;-----------------------------
                      01846 
0009FA 010?           01847         banksel digitT5
0009FC 50??           01848         movf    digitT5,W                       ;Get Above decimal point (>4)
0009FE EC?? F???      01849         call    bin_bcd
                      01850 
000A02 010?           01851         banksel LSD
000A04 50??           01852         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      01853 
000A06 010?           01854         banksel temp_wr 
000A08 6E??           01855         movwf   temp_wr
000A0A EC?? F???      01856         call    d_write
                      01857 
000A0E 010?           01858         banksel digitT4
000A10 50??           01859         movf    digitT4,W                       ;Get Above decimal point (>4)
000A12 EC?? F???      01860         call    bin_bcd
000A16 010?           01861         banksel LSD
000A18 50??           01862         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      01863 
000A1A 010?           01864         banksel temp_wr 
000A1C 6E??           01865         movwf   temp_wr
000A1E EC?? F???      01866         call    d_write
                      01867 
000A22 010?           01868         banksel digitT3
000A24 50??           01869         movf    digitT3,W                       ;Get Above decimal point (>4)
000A26 EC?? F???      01870         call    bin_bcd
000A2A 010?           01871         banksel LSD
000A2C 50??           01872         movf    LSD,W                   ;send high digit from the LSD #.xx      
                      01873 
000A2E 010?           01874         banksel temp_wr 
000A30 6E??           01875         movwf   temp_wr
000A32 EC?? F???      01876         call    d_write
                      01877 
000A36 010?           01878         banksel digitT2
000A38 50??           01879         movf    digitT2,W                       ;below decimal point
000A3A EC?? F???      01880         call    bin_bcd
000A3E 010?           01881         banksel LSD
000A40 50??           01882         movf    LSD,W                   ;send low digit   x.#x
                      01883 
000A42 010?           01884         banksel temp_wr 
000A44 6E??           01885         movwf   temp_wr
000A46 EC?? F???      01886         call    d_write
                      01887 
                      01888 ;       movf    digitT1,W                       ;Get hundreds
                      01889 ;       call    bin_bcd
                      01890 ;       movf    LSD,W                   ;send low digit   x.x#
                      01891 ;       movwf   temp_wr
                      01892 ;       call    d_write
                      01893 
000A4A 010?           01894         banksel temp_wr 
000A4C 0E20           01895         movlw   A' '            
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 38


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000A4E 6E??           01896         movwf   temp_wr
000A50 EC?? F???      01897         call    d_write
                      01898 
000A54 010?           01899         banksel temp_wr 
000A56 0E6D           01900         movlw   A'm'            
000A58 6E??           01901         movwf   temp_wr
000A5A EC?? F???      01902         call    d_write
                      01903 
000A5E 010?           01904         banksel temp_wr 
000A60 0E41           01905         movlw   A'A'            
000A62 6E??           01906         movwf   temp_wr
000A64 EC?? F???      01907         call    d_write
                      01908 
000A68 010?           01909         banksel temp_wr 
000A6A 0E68           01910         movlw   A'h'            
000A6C 6E??           01911         movwf   temp_wr
000A6E EC?? F???      01912         call    d_write
                      01913 
                      01914 
000A72 010?           01915         banksel temp_wr 
000A74 0E20           01916         movlw   A' '            
000A76 6E??           01917         movwf   temp_wr
000A78 EC?? F???      01918         call    d_write
                      01919 
000A7C 010?           01920         banksel temp_wr 
000A7E 0E20           01921         movlw   A' '            
000A80 6E??           01922         movwf   temp_wr
000A82 EC?? F???      01923         call    d_write
                      01924 
000A86 010?           01925         banksel temp_wr 
000A88 0E20           01926         movlw   A' '            
000A8A 6E??           01927         movwf   temp_wr
000A8C EC?? F???      01928         call    d_write
                      01929 
000A90 0012           01930         return
                      01931 
                      01932 
                      01933 ;/---------------------------------------------------------/
000A92                01934 Disp_StdUnderCharged
                      01935 ;/* This routin displays " StartedUnderChgd" in Line 2  */
                      01936 
000A92 EC?? F???      01937         call    LCDLine_2
                      01938 
000A96 0E53           01939         movlw   A'S'                                    ; 1                     
000A98 6E??           01940         movwf   temp_wr
000A9A EC?? F???      01941         call    d_write 
                      01942         
000A9E 0E74           01943         movlw   A't'                                    ;2
000AA0 6E??           01944         movwf   temp_wr
000AA2 EC?? F???      01945         call    d_write 
                      01946 
000AA6 0E61           01947         movlw   A'a'                                    ;3
000AA8 6E??           01948         movwf   temp_wr
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 39


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000AAA EC?? F???      01949         call    d_write 
                      01950 
000AAE 0E72           01951         movlw   A'r'                                    ;4
000AB0 6E??           01952         movwf   temp_wr
000AB2 EC?? F???      01953         call    d_write
000AB6 0E74           01954         movlw   A't'                                    ;5
000AB8 6E??           01955         movwf   temp_wr
000ABA EC?? F???      01956         call    d_write
000ABE 0E65           01957         movlw   A'e'                                    ;6
000AC0 6E??           01958         movwf   temp_wr
000AC2 EC?? F???      01959         call    d_write
000AC6 0E64           01960         movlw   A'd'                                    ;7
000AC8 6E??           01961         movwf   temp_wr
000ACA EC?? F???      01962         call    d_write
                      01963 
000ACE 0E55           01964         movlw   A'U'                                    ;8
000AD0 6E??           01965         movwf   temp_wr
000AD2 EC?? F???      01966         call    d_write
                      01967 
000AD6 0E6E           01968         movlw   A'n'                                    ;9
000AD8 6E??           01969         movwf   temp_wr
000ADA EC?? F???      01970         call    d_write
000ADE 0E64           01971         movlw   A'd'                                    ;10
000AE0 6E??           01972         movwf   temp_wr
000AE2 EC?? F???      01973         call    d_write
000AE6 0E65           01974         movlw   A'e'                                    ;11
000AE8 6E??           01975         movwf   temp_wr
000AEA EC?? F???      01976         call    d_write
000AEE 0E72           01977         movlw   A'r'                                    ;12
000AF0 6E??           01978         movwf   temp_wr
000AF2 EC?? F???      01979         call    d_write
                      01980 
                      01981 
000AF6 0E43           01982         movlw   A'C'                                    ;13
000AF8 6E??           01983         movwf   temp_wr
000AFA EC?? F???      01984         call    d_write
000AFE 0E68           01985         movlw   A'h'                                    ;14
000B00 6E??           01986         movwf   temp_wr
000B02 EC?? F???      01987         call    d_write
000B06 0E67           01988         movlw   A'g'                                    ;15
000B08 6E??           01989         movwf   temp_wr
000B0A EC?? F???      01990         call    d_write
000B0E 0E64           01991         movlw   A'd'                                    ;16
000B10 6E??           01992         movwf   temp_wr
000B12 EC?? F???      01993         call    d_write
                      01994 
000B16 0012           01995         return
                      01996 
                      01997 
                      01998 ;/*-----------------------------------------------------*/
000B18                01999 Disp_ChargeCompleted
                      02000 ;/* This routin displays "Charging Done   " in Line 1 */
                      02001 
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 40


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000B18 EC?? F???      02002         call    LCDLine_1
                      02003 
000B1C 0E43           02004         movlw   A'C'                                    ; 1                     
000B1E 6E??           02005         movwf   temp_wr
000B20 EC?? F???      02006         call    d_write 
                      02007         
000B24 0E68           02008         movlw   A'h'                                    ;2
000B26 6E??           02009         movwf   temp_wr
000B28 EC?? F???      02010         call    d_write 
                      02011 
000B2C 0E61           02012         movlw   A'a'                                    ;3
000B2E 6E??           02013         movwf   temp_wr
000B30 EC?? F???      02014         call    d_write 
                      02015 
000B34 0E72           02016         movlw   A'r'                                    ;4
000B36 6E??           02017         movwf   temp_wr
000B38 EC?? F???      02018         call    d_write
000B3C 0E67           02019         movlw   A'g'                                    ;5
000B3E 6E??           02020         movwf   temp_wr
000B40 EC?? F???      02021         call    d_write
000B44 0E69           02022         movlw   A'i'                                    ;6
000B46 6E??           02023         movwf   temp_wr
000B48 EC?? F???      02024         call    d_write
000B4C 0E6E           02025         movlw   A'n'                                    ;7
000B4E 6E??           02026         movwf   temp_wr
000B50 EC?? F???      02027         call    d_write
                      02028 
000B54 0E67           02029         movlw   A'g'                                    ;8
000B56 6E??           02030         movwf   temp_wr
000B58 EC?? F???      02031         call    d_write
                      02032 
000B5C 0E20           02033         movlw   A' '                                    ;9
000B5E 6E??           02034         movwf   temp_wr
000B60 EC?? F???      02035         call    d_write
000B64 0E44           02036         movlw   A'D'                                    ;10
000B66 6E??           02037         movwf   temp_wr
000B68 EC?? F???      02038         call    d_write
000B6C 0E6F           02039         movlw   A'o'                                    ;11
000B6E 6E??           02040         movwf   temp_wr
000B70 EC?? F???      02041         call    d_write
000B74 0E6E           02042         movlw   A'n'                                    ;12
000B76 6E??           02043         movwf   temp_wr
000B78 EC?? F???      02044         call    d_write
000B7C 0E65           02045         movlw   A'e'                                    ;13
000B7E 6E??           02046         movwf   temp_wr
000B80 EC?? F???      02047         call    d_write
                      02048         
000B84 0E20           02049         movlw   A' '                                    ;14
000B86 6E??           02050         movwf   temp_wr
000B88 EC?? F???      02051         call    d_write
000B8C 0E20           02052         movlw   A' '                                    ;15
000B8E 6E??           02053         movwf   temp_wr
000B90 EC?? F???      02054         call    d_write
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 41


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000B94 0E20           02055         movlw   A' '                                    ;16
000B96 6E??           02056         movwf   temp_wr
000B98 EC?? F???      02057         call    d_write
                      02058 
000B9C 0012           02059         return
                      02060 ;/*---------------------------------------------------*/
000B9E                02061 Disp_PressS1
                      02062 ;/* This routin displays "Push S1 for Next" in Line 2 */
                      02063 
000B9E EC?? F???      02064         call    LCDLine_2
                      02065 
000BA2 0E50           02066         movlw   A'P'                                    ; 1                     
000BA4 6E??           02067         movwf   temp_wr
000BA6 EC?? F???      02068         call    d_write 
                      02069         
000BAA 0E75           02070         movlw   A'u'                                    ;2
000BAC 6E??           02071         movwf   temp_wr
000BAE EC?? F???      02072         call    d_write 
                      02073 
000BB2 0E73           02074         movlw   A's'                                    ;3
000BB4 6E??           02075         movwf   temp_wr
000BB6 EC?? F???      02076         call    d_write 
                      02077 
000BBA 0E68           02078         movlw   A'h'                                    ;4
000BBC 6E??           02079         movwf   temp_wr
000BBE EC?? F???      02080         call    d_write
000BC2 0E20           02081         movlw   A' '                                    ;5
000BC4 6E??           02082         movwf   temp_wr
000BC6 EC?? F???      02083         call    d_write
000BCA 0E53           02084         movlw   A'S'                                    ;6
000BCC 6E??           02085         movwf   temp_wr
000BCE EC?? F???      02086         call    d_write
000BD2 0E31           02087         movlw   A'1'                                    ;7
000BD4 6E??           02088         movwf   temp_wr
000BD6 EC?? F???      02089         call    d_write
                      02090 
000BDA 0E20           02091         movlw   A' '                                    ;8
000BDC 6E??           02092         movwf   temp_wr
000BDE EC?? F???      02093         call    d_write
                      02094 
000BE2 0E66           02095         movlw   A'f'                                    ;9
000BE4 6E??           02096         movwf   temp_wr
000BE6 EC?? F???      02097         call    d_write
000BEA 0E6F           02098         movlw   A'o'                                    ;10
000BEC 6E??           02099         movwf   temp_wr
000BEE EC?? F???      02100         call    d_write
000BF2 0E72           02101         movlw   A'r'                                    ;11
000BF4 6E??           02102         movwf   temp_wr
000BF6 EC?? F???      02103         call    d_write
000BFA 0E20           02104         movlw   A' '                                    ;12
000BFC 6E??           02105         movwf   temp_wr
000BFE EC?? F???      02106         call    d_write
000C02 0E4E           02107         movlw   A'N'                                    ;13
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 42


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000C04 6E??           02108         movwf   temp_wr
000C06 EC?? F???      02109         call    d_write
                      02110         
000C0A 0E65           02111         movlw   A'e'                                    ;14
000C0C 6E??           02112         movwf   temp_wr
000C0E EC?? F???      02113         call    d_write
000C12 0E78           02114         movlw   A'x'                                    ;15
000C14 6E??           02115         movwf   temp_wr
000C16 EC?? F???      02116         call    d_write
000C1A 0E74           02117         movlw   A't'                                    ;16
000C1C 6E??           02118         movwf   temp_wr
000C1E EC?? F???      02119         call    d_write
                      02120 
000C22 0012           02121         return
                      02122 
                      02123 
                      02124 ;/*-------------------------------------------------*/
000C24                02125 Disp_DisconnectJP2
                      02126 ;/* This routin display "Disconnect JP2  " in Line 1 */
                      02127 
000C24 EC?? F???      02128         call    LCDLine_1
                      02129 
000C28 0E44           02130         movlw   A'D'                                    ; 1                     
000C2A 6E??           02131         movwf   temp_wr
000C2C EC?? F???      02132         call    d_write 
                      02133         
000C30 0E69           02134         movlw   A'i'                                    ;2
000C32 6E??           02135         movwf   temp_wr
000C34 EC?? F???      02136         call    d_write 
                      02137 
000C38 0E73           02138         movlw   A's'                                    ;3
000C3A 6E??           02139         movwf   temp_wr
000C3C EC?? F???      02140         call    d_write 
                      02141 
000C40 0E63           02142         movlw   A'c'                                    ;4
000C42 6E??           02143         movwf   temp_wr
000C44 EC?? F???      02144         call    d_write
000C48 0E6F           02145         movlw   A'o'                                    ;5
000C4A 6E??           02146         movwf   temp_wr
000C4C EC?? F???      02147         call    d_write
000C50 0E6E           02148         movlw   A'n'                                    ;6
000C52 6E??           02149         movwf   temp_wr
000C54 EC?? F???      02150         call    d_write
000C58 0E6E           02151         movlw   A'n'                                    ;7
000C5A 6E??           02152         movwf   temp_wr
000C5C EC?? F???      02153         call    d_write
                      02154 
000C60 0E65           02155         movlw   A'e'                                    ;8
000C62 6E??           02156         movwf   temp_wr
000C64 EC?? F???      02157         call    d_write
                      02158 
000C68 0E63           02159         movlw   A'c'                                    ;9
000C6A 6E??           02160         movwf   temp_wr
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 43


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000C6C EC?? F???      02161         call    d_write
000C70 0E74           02162         movlw   A't'                                    ;10
000C72 6E??           02163         movwf   temp_wr
000C74 EC?? F???      02164         call    d_write
000C78 0E20           02165         movlw   A' '                                    ;11
000C7A 6E??           02166         movwf   temp_wr
000C7C EC?? F???      02167         call    d_write
000C80 0E4A           02168         movlw   A'J'                                    ;12
000C82 6E??           02169         movwf   temp_wr
000C84 EC?? F???      02170         call    d_write
000C88 0E50           02171         movlw   A'P'                                    ;13
000C8A 6E??           02172         movwf   temp_wr
000C8C EC?? F???      02173         call    d_write
                      02174         
000C90 0E32           02175         movlw   A'2'                                    ;14
000C92 6E??           02176         movwf   temp_wr
000C94 EC?? F???      02177         call    d_write
000C98 0E20           02178         movlw   A' '                                    ;15
000C9A 6E??           02179         movwf   temp_wr
000C9C EC?? F???      02180         call    d_write
000CA0 0E20           02181         movlw   A' '                                    ;16
000CA2 6E??           02182         movwf   temp_wr
000CA4 EC?? F???      02183         call    d_write
                      02184 
000CA8 0012           02185         return
                      02186 
                      02187 ;/*-------------------------------------------------*/
000CAA                02188 Disp_ConnectJP1
                      02189 ;/* This routin display "ConntJP1,Push S1" in Line 2 */
                      02190 
000CAA EC?? F???      02191         call    LCDLine_2
                      02192 
000CAE 0E43           02193         movlw   A'C'                                    ; 1                     
000CB0 6E??           02194         movwf   temp_wr
000CB2 EC?? F???      02195         call    d_write 
                      02196         
000CB6 0E6F           02197         movlw   A'o'                                    ;2
000CB8 6E??           02198         movwf   temp_wr
000CBA EC?? F???      02199         call    d_write 
                      02200 
000CBE 0E6E           02201         movlw   A'n'                                    ;3
000CC0 6E??           02202         movwf   temp_wr
000CC2 EC?? F???      02203         call    d_write 
                      02204 
000CC6 0E6E           02205         movlw   A'n'                                    ;4
000CC8 6E??           02206         movwf   temp_wr
000CCA EC?? F???      02207         call    d_write
000CCE 0E74           02208         movlw   A't'                                    ;5
000CD0 6E??           02209         movwf   temp_wr
000CD2 EC?? F???      02210         call    d_write
000CD6 0E4A           02211         movlw   A'J'                                    ;6
000CD8 6E??           02212         movwf   temp_wr
000CDA EC?? F???      02213         call    d_write
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 44


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000CDE 0E50           02214         movlw   A'P'                                    ;7
000CE0 6E??           02215         movwf   temp_wr
000CE2 EC?? F???      02216         call    d_write
                      02217 
000CE6 0E31           02218         movlw   A'1'                                    ;8
000CE8 6E??           02219         movwf   temp_wr
000CEA EC?? F???      02220         call    d_write
                      02221 
000CEE 0E2C           02222         movlw   A','                                    ;9
000CF0 6E??           02223         movwf   temp_wr
000CF2 EC?? F???      02224         call    d_write
000CF6 0E50           02225         movlw   A'P'                                    ;10
000CF8 6E??           02226         movwf   temp_wr
000CFA EC?? F???      02227         call    d_write
000CFE 0E75           02228         movlw   A'u'                                    ;11
000D00 6E??           02229         movwf   temp_wr
000D02 EC?? F???      02230         call    d_write
000D06 0E73           02231         movlw   A's'                                    ;12
000D08 6E??           02232         movwf   temp_wr
000D0A EC?? F???      02233         call    d_write
000D0E 0E68           02234         movlw   A'h'                                    ;13
000D10 6E??           02235         movwf   temp_wr
000D12 EC?? F???      02236         call    d_write
                      02237         
000D16 0E20           02238         movlw   A' '                                    ;14
000D18 6E??           02239         movwf   temp_wr
000D1A EC?? F???      02240         call    d_write
000D1E 0E53           02241         movlw   A'S'                                    ;15
000D20 6E??           02242         movwf   temp_wr
000D22 EC?? F???      02243         call    d_write
000D26 0E31           02244         movlw   A'1'                                    ;16
000D28 6E??           02245         movwf   temp_wr
000D2A EC?? F???      02246         call    d_write
                      02247 
000D2E 0012           02248         return
                      02249 ;/**********************************************************/
                      02250 
                      02251 
                      02252 
                      02253 
                      02254 
                      02255 ;/*-------------------------------------------------*/
000D30                02256 Disp_BatLowerThan0_75V
                      02257 ;/* This routin display "ConntJP1,Push S1" in Line 2 */
                      02258 
000D30 EC?? F???      02259         call    LCDLine_2
                      02260 
000D34 0E42           02261         movlw   A'B'                                    ; 1                     
000D36 6E??           02262         movwf   temp_wr
000D38 EC?? F???      02263         call    d_write 
                      02264         
000D3C 0E61           02265         movlw   A'a'                                    ;2
000D3E 6E??           02266         movwf   temp_wr
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 45


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000D40 EC?? F???      02267         call    d_write 
                      02268 
000D44 0E74           02269         movlw   A't'                                    ;3
000D46 6E??           02270         movwf   temp_wr
000D48 EC?? F???      02271         call    d_write 
                      02272 
000D4C 0E74           02273         movlw   A't'                                    ;4
000D4E 6E??           02274         movwf   temp_wr
000D50 EC?? F???      02275         call    d_write
000D54 0E65           02276         movlw   A'e'                                    ;5
000D56 6E??           02277         movwf   temp_wr
000D58 EC?? F???      02278         call    d_write
000D5C 0E72           02279         movlw   A'r'                                    ;6
000D5E 6E??           02280         movwf   temp_wr
000D60 EC?? F???      02281         call    d_write
000D64 0E79           02282         movlw   A'y'                                    ;7
000D66 6E??           02283         movwf   temp_wr
000D68 EC?? F???      02284         call    d_write
                      02285 
000D6C 0E56           02286         movlw   A'V'                                    ;8
000D6E 6E??           02287         movwf   temp_wr
000D70 EC?? F???      02288         call    d_write
                      02289 
000D74 0E20           02290         movlw   A' '                                    ;9
000D76 6E??           02291         movwf   temp_wr
000D78 EC?? F???      02292         call    d_write
000D7C 0E3C           02293         movlw   A'<'                                    ;10
000D7E 6E??           02294         movwf   temp_wr
000D80 EC?? F???      02295         call    d_write
000D84 0E20           02296         movlw   A' '                                    ;11
000D86 6E??           02297         movwf   temp_wr
000D88 EC?? F???      02298         call    d_write
000D8C 0E30           02299         movlw   A'0'                                    ;12
000D8E 6E??           02300         movwf   temp_wr
000D90 EC?? F???      02301         call    d_write
000D94 0E2E           02302         movlw   A'.'                                    ;13
000D96 6E??           02303         movwf   temp_wr
000D98 EC?? F???      02304         call    d_write
                      02305         
000D9C 0E37           02306         movlw   A'7'                                    ;14
000D9E 6E??           02307         movwf   temp_wr
000DA0 EC?? F???      02308         call    d_write
000DA4 0E35           02309         movlw   A'5'                                    ;15
000DA6 6E??           02310         movwf   temp_wr
000DA8 EC?? F???      02311         call    d_write
000DAC 0E56           02312         movlw   A'V'                                    ;16
000DAE 6E??           02313         movwf   temp_wr
000DB0 EC?? F???      02314         call    d_write
                      02315 
000DB4 0012           02316         return
                      02317 ;/**********************************************************/
                      02318 
                      02319 
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 46


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02320 ;/*-------------------------------------------------*/
000DB6                02321 Disp_PlseWaitAtL1
                      02322 ;/* This routin display "Please Wait ... */
                      02323 
000DB6 EC?? F???      02324         call    LCDLine_1
                      02325 
000DBA 0E20           02326         movlw   A' '                                    ; 1                     
000DBC 6E??           02327         movwf   temp_wr
000DBE EC?? F???      02328         call    d_write 
                      02329         
000DC2 0E50           02330         movlw   A'P'                                    ;2
000DC4 6E??           02331         movwf   temp_wr
000DC6 EC?? F???      02332         call    d_write 
                      02333 
000DCA 0E65           02334         movlw   A'e'                                    ;3
000DCC 6E??           02335         movwf   temp_wr
000DCE EC?? F???      02336         call    d_write 
                      02337 
000DD2 0E61           02338         movlw   A'a'                                    ;4
000DD4 6E??           02339         movwf   temp_wr
000DD6 EC?? F???      02340         call    d_write
000DDA 0E73           02341         movlw   A's'                                    ;5
000DDC 6E??           02342         movwf   temp_wr
000DDE EC?? F???      02343         call    d_write
000DE2 0E65           02344         movlw   A'e'                                    ;6
000DE4 6E??           02345         movwf   temp_wr
000DE6 EC?? F???      02346         call    d_write
000DEA 0E20           02347         movlw   A' '                                    ;7
000DEC 6E??           02348         movwf   temp_wr
000DEE EC?? F???      02349         call    d_write
                      02350 
000DF2 0E57           02351         movlw   A'W'                                    ;8
000DF4 6E??           02352         movwf   temp_wr
000DF6 EC?? F???      02353         call    d_write
                      02354 
000DFA 0E61           02355         movlw   A'a'                                    ;9
000DFC 6E??           02356         movwf   temp_wr
000DFE EC?? F???      02357         call    d_write
000E02 0E69           02358         movlw   A'i'                                    ;10
000E04 6E??           02359         movwf   temp_wr
000E06 EC?? F???      02360         call    d_write
000E0A 0E74           02361         movlw   A't'                                    ;11
000E0C 6E??           02362         movwf   temp_wr
000E0E EC?? F???      02363         call    d_write
000E12 0E20           02364         movlw   A' '                                    ;12
000E14 6E??           02365         movwf   temp_wr
000E16 EC?? F???      02366         call    d_write
000E1A 0E2E           02367         movlw   A'.'                                    ;13
000E1C 6E??           02368         movwf   temp_wr
000E1E EC?? F???      02369         call    d_write
                      02370         
000E22 0E2E           02371         movlw   A'.'                                    ;14
000E24 6E??           02372         movwf   temp_wr
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 47


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000E26 EC?? F???      02373         call    d_write
000E2A 0E2E           02374         movlw   A'.'                                    ;15
000E2C 6E??           02375         movwf   temp_wr
000E2E EC?? F???      02376         call    d_write
000E32 0E2E           02377         movlw   A'.'                                    ;16
000E34 6E??           02378         movwf   temp_wr
000E36 EC?? F???      02379         call    d_write
                      02380 
000E3A 0012           02381         return
                      02382 ;/**********************************************************/
                      02383 
                      02384 ;/*-------------------------------------------------*/
000E3C                02385 Disp_InitAtL2
                      02386 ;/* This routin display "Initialization ... */
                      02387 
000E3C EC?? F???      02388         call    LCDLine_2
                      02389 
000E40 0E20           02390         movlw   A' '                                    ; 1                     
000E42 6E??           02391         movwf   temp_wr
000E44 EC?? F???      02392         call    d_write 
                      02393         
000E48 0E49           02394         movlw   A'I'                                    ;2
000E4A 6E??           02395         movwf   temp_wr
000E4C EC?? F???      02396         call    d_write 
                      02397 
000E50 0E6E           02398         movlw   A'n'                                    ;3
000E52 6E??           02399         movwf   temp_wr
000E54 EC?? F???      02400         call    d_write 
                      02401 
000E58 0E69           02402         movlw   A'i'                                    ;4
000E5A 6E??           02403         movwf   temp_wr
000E5C EC?? F???      02404         call    d_write
000E60 0E74           02405         movlw   A't'                                    ;5
000E62 6E??           02406         movwf   temp_wr
000E64 EC?? F???      02407         call    d_write
000E68 0E69           02408         movlw   A'i'                                    ;6
000E6A 6E??           02409         movwf   temp_wr
000E6C EC?? F???      02410         call    d_write
000E70 0E61           02411         movlw   A'a'                                    ;7
000E72 6E??           02412         movwf   temp_wr
000E74 EC?? F???      02413         call    d_write
                      02414 
000E78 0E6C           02415         movlw   A'l'                                    ;8
000E7A 6E??           02416         movwf   temp_wr
000E7C EC?? F???      02417         call    d_write
                      02418 
000E80 0E69           02419         movlw   A'i'                                    ;9
000E82 6E??           02420         movwf   temp_wr
000E84 EC?? F???      02421         call    d_write
000E88 0E7A           02422         movlw   A'z'                                    ;10
000E8A 6E??           02423         movwf   temp_wr
000E8C EC?? F???      02424         call    d_write
000E90 0E69           02425         movlw   A'i'                                    ;11
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 48


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000E92 6E??           02426         movwf   temp_wr
000E94 EC?? F???      02427         call    d_write
000E98 0E6E           02428         movlw   A'n'                                    ;12
000E9A 6E??           02429         movwf   temp_wr
000E9C EC?? F???      02430         call    d_write
000EA0 0E67           02431         movlw   A'g'                                    ;13
000EA2 6E??           02432         movwf   temp_wr
000EA4 EC?? F???      02433         call    d_write
                      02434         
000EA8 0E2E           02435         movlw   A'.'                                    ;14
000EAA 6E??           02436         movwf   temp_wr
000EAC EC?? F???      02437         call    d_write
000EB0 0E2E           02438         movlw   A'.'                                    ;15
000EB2 6E??           02439         movwf   temp_wr
000EB4 EC?? F???      02440         call    d_write
000EB8 0E2E           02441         movlw   A'.'                                    ;16
000EBA 6E??           02442         movwf   temp_wr
000EBC EC?? F???      02443         call    d_write
                      02444 
000EC0 0012           02445         return
                      02446 ;/**********************************************************/
                      02447 
                      02448 
                      02449 ;/*-------------------------------------------------*/
000EC2                02450 Disp_ConntBattery
                      02451 ;/* This routin display "Initialization ... */
                      02452 
000EC2 EC?? F???      02453         call    LCDLine_1
                      02454 
000EC6 0E43           02455         movlw   A'C'                                    ; 1                     
000EC8 6E??           02456         movwf   temp_wr
000ECA EC?? F???      02457         call    d_write 
                      02458         
000ECE 0E6F           02459         movlw   A'o'                                    ;2
000ED0 6E??           02460         movwf   temp_wr
000ED2 EC?? F???      02461         call    d_write 
                      02462 
000ED6 0E6E           02463         movlw   A'n'                                    ;3
000ED8 6E??           02464         movwf   temp_wr
000EDA EC?? F???      02465         call    d_write 
                      02466 
000EDE 0E6E           02467         movlw   A'n'                                    ;4
000EE0 6E??           02468         movwf   temp_wr
000EE2 EC?? F???      02469         call    d_write
000EE6 0E65           02470         movlw   A'e'                                    ;5
000EE8 6E??           02471         movwf   temp_wr
000EEA EC?? F???      02472         call    d_write
000EEE 0E63           02473         movlw   A'c'                                    ;6
000EF0 6E??           02474         movwf   temp_wr
000EF2 EC?? F???      02475         call    d_write
000EF6 0E74           02476         movlw   A't'                                    ;7
000EF8 6E??           02477         movwf   temp_wr
000EFA EC?? F???      02478         call    d_write
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 49


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02479 
000EFE 0E20           02480         movlw   A' '                                    ;8
000F00 6E??           02481         movwf   temp_wr
000F02 EC?? F???      02482         call    d_write
                      02483 
000F06 0E42           02484         movlw   A'B'                                    ;9
000F08 6E??           02485         movwf   temp_wr
000F0A EC?? F???      02486         call    d_write
000F0E 0E61           02487         movlw   A'a'                                    ;10
000F10 6E??           02488         movwf   temp_wr
000F12 EC?? F???      02489         call    d_write
000F16 0E74           02490         movlw   A't'                                    ;11
000F18 6E??           02491         movwf   temp_wr
000F1A EC?? F???      02492         call    d_write
000F1E 0E74           02493         movlw   A't'                                    ;12
000F20 6E??           02494         movwf   temp_wr
000F22 EC?? F???      02495         call    d_write
000F26 0E65           02496         movlw   A'e'                                    ;13
000F28 6E??           02497         movwf   temp_wr
000F2A EC?? F???      02498         call    d_write
                      02499         
000F2E 0E72           02500         movlw   A'r'                                    ;14
000F30 6E??           02501         movwf   temp_wr
000F32 EC?? F???      02502         call    d_write
000F36 0E79           02503         movlw   A'y'                                    ;15
000F38 6E??           02504         movwf   temp_wr
000F3A EC?? F???      02505         call    d_write
000F3E 0E3A           02506         movlw   A':'                                    ;16
000F40 6E??           02507         movwf   temp_wr
000F42 EC?? F???      02508         call    d_write
                      02509 
000F46 0012           02510         return
                      02511 ;/**********************************************************/
                      02512 
                      02513 
                      02514 ;/*-------------------------------------------------*/
000F48                02515 Disp_AtTP9_PressS1
                      02516 ;/* This routin display "Initialization ... */
                      02517 
000F48 EC?? F???      02518         call    LCDLine_2
                      02519 
000F4C 0E2B           02520         movlw   A'+'                                    ; 1                     
000F4E 6E??           02521         movwf   temp_wr
000F50 EC?? F???      02522         call    d_write 
                      02523         
000F54 0E56           02524         movlw   A'V'                                    ;2
000F56 6E??           02525         movwf   temp_wr
000F58 EC?? F???      02526         call    d_write 
                      02527 
000F5C 0E20           02528         movlw   A' '                                    ;3
000F5E 6E??           02529         movwf   temp_wr
000F60 EC?? F???      02530         call    d_write 
                      02531 
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 50


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000F64 0E74           02532         movlw   A't'                                    ;4
000F66 6E??           02533         movwf   temp_wr
000F68 EC?? F???      02534         call    d_write
000F6C 0E6F           02535         movlw   A'o'                                    ;5
000F6E 6E??           02536         movwf   temp_wr
000F70 EC?? F???      02537         call    d_write
000F74 0E54           02538         movlw   A'T'                                    ;6
000F76 6E??           02539         movwf   temp_wr
000F78 EC?? F???      02540         call    d_write
000F7C 0E50           02541         movlw   A'P'                                    ;7
000F7E 6E??           02542         movwf   temp_wr
000F80 EC?? F???      02543         call    d_write
                      02544 
000F84 0E39           02545         movlw   A'9'                                    ;8
000F86 6E??           02546         movwf   temp_wr
000F88 EC?? F???      02547         call    d_write
                      02548 
000F8C 0E2C           02549         movlw   A','                                    ;9
000F8E 6E??           02550         movwf   temp_wr
000F90 EC?? F???      02551         call    d_write
000F94 0E50           02552         movlw   A'P'                                    ;10
000F96 6E??           02553         movwf   temp_wr
000F98 EC?? F???      02554         call    d_write
000F9C 0E75           02555         movlw   A'u'                                    ;11
000F9E 6E??           02556         movwf   temp_wr
000FA0 EC?? F???      02557         call    d_write
000FA4 0E73           02558         movlw   A's'                                    ;12
000FA6 6E??           02559         movwf   temp_wr
000FA8 EC?? F???      02560         call    d_write
000FAC 0E68           02561         movlw   A'h'                                    ;13
000FAE 6E??           02562         movwf   temp_wr
000FB0 EC?? F???      02563         call    d_write
                      02564         
000FB4 0E20           02565         movlw   A' '                                    ;14
000FB6 6E??           02566         movwf   temp_wr
000FB8 EC?? F???      02567         call    d_write
000FBC 0E53           02568         movlw   A'S'                                    ;15
000FBE 6E??           02569         movwf   temp_wr
000FC0 EC?? F???      02570         call    d_write
000FC4 0E31           02571         movlw   A'1'                                    ;16
000FC6 6E??           02572         movwf   temp_wr
000FC8 EC?? F???      02573         call    d_write
                      02574 
000FCC 0012           02575         return
                      02576 ;/**********************************************************/
                      02577 
                      02578 
                      02579 
                      02580 
                      02581 
                      02582 
                      02583 
                      02584 
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 51


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02585 
                      02586 
                      02587 
                      02588 
                      02589 
                      02590 
                      02591 ;/*********************************************************/
                      02592         
000FCE                02593 LCDLine_1
000FCE 010?           02594         banksel temp_wr
000FD0 0E80           02595         movlw   0x80
000FD2 6E??           02596         movwf   temp_wr
000FD4 D???           02597         rcall   i_write
000FD6 0012           02598         return
                      02599 ;       GLOBAL  LCDLine_1
                      02600 
000FD8                02601 LCDLine_2
000FD8 0EC0           02602         movlw   0xC0
000FDA 6E??           02603         movwf   temp_wr
000FDC D???           02604         rcall   i_write
000FDE 0012           02605         return
                      02606 ;       GLOBAL  LCDLine_2
                      02607 
                      02608         ;write data
000FE0                02609 d_write
                      02610 ;       movff   temp_wr,TXREG
                      02611 ;       btfss   TXSTA,TRMT
                      02612 ;       goto    $-2
000FE0 D???           02613         rcall   LCDBusy
000FE2 80D8           02614         bsf             STATUS, C       
000FE4 D???           02615         rcall   LCDWrite
000FE6 0012           02616         return
                      02617 ;       GLOBAL  d_write
                      02618 
                      02619         ;write instruction
000FE8                02620 i_write
000FE8 D???           02621         rcall   LCDBusy
000FEA 90D8           02622         bcf             STATUS, C
000FEC D???           02623         rcall   LCDWrite
000FEE 0012           02624         return
                      02625  ;      GLOBAL  i_write
                      02626 
                      02627 
                      02628 rlcd    macro   MYREGISTER
                      02629  IF MYREGISTER == 1
                      02630         bsf     STATUS, C
                      02631         rcall   LCDRead
                      02632  ELSE
                      02633         bcf     STATUS, C
                      02634         rcall   LCDRead
                      02635  ENDIF
                      02636         endm
                      02637 ;****************************************************************************
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 52


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02638 
                      02639 
                      02640 
                      02641 
                      02642 ; *******************************************************************
000FF0                02643 LCDInit
                      02644 
                      02645 ; no needed here ---
                      02646 ;       bsf             LATD,7
                      02647 ;       bcf             TRISD,7
                      02648 ;       bsf             LATD,7
                      02649 ;       call    Delay30ms
                      02650 ;       clrf    PORTA
                      02651 ;-----------------------------
000FF0 0000           02652         nop
000FF2 0000           02653         nop
000FF4 0000           02654         nop
000FF6 0000           02655         nop
000FF8 0000           02656         nop
                      02657 
                      02658 
                      02659 
                      02660 ; The following steps help discharging the LCD - Lee
                      02661 
000FFA 6A83           02662         clrf    PORTD
000FFC 6A8C           02663         clrf    LATD
000FFE EC?? F???      02664         call    Delay30ms       
001002 EC?? F???      02665         call    Delay30ms       
                      02666 
                      02667 ; turn off LED D11, D12, D13
001006 8683           02668         bsf     PORTD,3
001008 8C83           02669         bsf     PORTD,6
00100A 8E83           02670         bsf     PORTD,7
                      02671 ;----------------------------
                      02672         
00100C 8483           02673         bsf     PORTD,2
00100E 8283           02674         bsf     PORTD,1
001010 8083           02675         bsf     PORTD,0
001012 EC?? F???      02676         call    Delay30ms       
001016 EC?? F???      02677         call    Delay30ms       
                      02678 
00101A 9483           02679         bcf     PORTD,2
00101C 9283           02680         bcf     PORTD,1
00101E 9083           02681         bcf     PORTD,0
                      02682 ;--------------------------
                      02683 ;       bsf     LCD_RS                  ; LCD register select line
                      02684 ;       bcf     LCD_RS                  ; LCD register select line
                      02685 ;
                      02686 ;       bsf     LCD_RW                  ; LCD read/write line
                      02687 ;       bcf     LCD_RW                  ; LCD read/write line
                      02688 ;
                      02689 ;       bsf     LCD_E           
                      02690 ;       bcf     LCD_E           
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 53


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02691 ;-------------------------
001020 EC?? F???      02692         call    Delay30ms       
001024 EC?? F???      02693         call    Delay30ms       
                      02694 
                      02695 ; test done for LCD pin discharging ....
                      02696 ;---------------------------------
                      02697 
                      02698 
001028 0E0F           02699         movlw   b'00001111'  ; all Digital I/O
00102A 6EC1           02700         movwf   ADCON1  
                      02701 
00102C 010?           02702         banksel COUNTER
00102E 0EFF           02703         movlw   0xff                    ; Wait ~15ms @ 20 MHz
001030 6E??           02704         movwf   COUNTER
001032                02705 lil1
001032 0EFF           02706         movlw   0xFF
001034 6E??           02707         movwf   delay
001036 D???           02708         rcall   DelayXCycles
001038 2E??           02709         decfsz  COUNTER,F
00103A D???           02710         bra     lil1
                      02711         
                      02712 ;0x20
                      02713 ;       movlw   b'00110000'             ;#1 Send control sequence 
                      02714 
00103C 010?           02715         banksel temp_wr
                      02716 
00103E 0E20           02717         movlw   b'00100000'             ;#1 Send control sequence 
001040 6E??           02718         movwf   temp_wr
001042 90D8           02719         bcf             STATUS,C
001044 D???           02720         rcall   LCDWriteNibble
                      02721 
001046 010?           02722         banksel COUNTER
001048 0EFF           02723         movlw   0xff                    ;Wait ~4ms @ 20 MHz
00104A 6E??           02724         movwf   COUNTER
                      02725 
00104C                02726 lil2
00104C 010?           02727         banksel delay
00104E 0EFF           02728         movlw   0xFF
001050 6E??           02729         movwf   delay
001052 D???           02730         rcall   DelayXCycles
001054 010?           02731         banksel COUNTER
001056 2E??           02732         decfsz  COUNTER,F
001058 D???           02733         bra     lil2
                      02734 
                      02735 
00105A 010?           02736         banksel temp_wr
                      02737 ;;0x28--2
                      02738 ;       movlw   b'00110000'             ;#2 Send control sequence
00105C 0E20           02739         movlw   b'00100000'             ;#2 Send control sequence
00105E 6E??           02740         movwf   temp_wr
001060 90D8           02741         bcf             STATUS,C
001062 D???           02742         rcall   LCDWriteNibble
                      02743 
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 54


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

001064 010?           02744         banksel delay
001066 0EFF           02745         movlw   0xFF                    ;Wait ~100us @ 20 MHz
001068 6E??           02746         movwf   delay
00106A D???           02747         rcall   DelayXCycles
                      02748 
00106C 010?           02749         banksel temp_wr 
                      02750 ;0x28-08                                        
                      02751 ;       movlw   b'0011000'              ;#3 Send control sequence
00106E 0E80           02752         movlw   b'10000000'             ;
001070 6E??           02753         movwf   temp_wr
001072 90D8           02754         bcf             STATUS,C
001074 D???           02755         rcall   LCDWriteNibble
                      02756 
                      02757                 ;test delay
001076 010?           02758         banksel delay
001078 0EFF           02759         movlw   0xFF                    ;Wait ~100us @ 20 MHz
00107A 6E??           02760         movwf   delay
00107C D???           02761         rcall   DelayXCycles
                      02762 
                      02763 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      02764 ;0C--0
                      02765 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
00107E 010?           02766         banksel temp_wr 
                      02767 ;       movlw   b'00100000'             ;#4 set 4-bit
001080 0E00           02768         movlw   b'00000000'             ;#4 set 4-bit
001082 6E??           02769         movwf   temp_wr
001084 90D8           02770         bcf             STATUS,C
001086 D???           02771         rcall   LCDWriteNibble
                      02772 ;0x08--08
001088 0EC0           02773         movlw   b'11000000'             ;#4 set 4-bit
00108A 6E??           02774         movwf   temp_wr
00108C 90D8           02775         bcf             STATUS,C
00108E D???           02776         rcall   LCDWriteNibble
                      02777 
001090 010?           02778         banksel delay   
001092 0EFF           02779         movlw   0xFF                    ;Wait ~100us @ 20 MHz
001094 6E??           02780         movwf   delay
001096 D???           02781         rcall   DelayXCycles
                      02782 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      02783 ;0x01
                      02784 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      02785 ;0x01-0
001098 010?           02786         banksel temp_wr 
00109A 0E00           02787         movlw   b'00000000'             ;#4 set 4-bit
00109C 6E??           02788         movwf   temp_wr
00109E 90D8           02789         bcf             STATUS,C
0010A0 D???           02790         rcall   LCDWriteNibble
                      02791 ;0x01--01
0010A2 0E10           02792         movlw   b'00010000'             ;#4 set 4-bit
0010A4 6E??           02793         movwf   temp_wr
0010A6 90D8           02794         bcf             STATUS,C
0010A8 D???           02795         rcall   LCDWriteNibble
                      02796 
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 55


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0010AA 010?           02797         banksel delay   
0010AC 0EFF           02798         movlw   0xFF                    ;Wait ~100us @ 20 MHz
0010AE 6E??           02799         movwf   delay
0010B0 D???           02800         rcall   DelayXCycles
                      02801 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      02802 
                      02803 
0010B2 EC?? F???      02804         call    LongDelay ;2ms
0010B6 EC?? F???      02805         call    LongDelay ;2ms
0010BA EC?? F???      02806         call    LongDelay ;2ms
0010BE EC?? F???      02807         call    LongDelay ;2ms
                      02808 
                      02809 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      02810 ;0x02
                      02811 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      02812 ;0x0-0
0010C2 010?           02813         banksel temp_wr 
0010C4 0E00           02814         movlw   b'00000000'             ;#4 set 4-bit
0010C6 6E??           02815         movwf   temp_wr
0010C8 90D8           02816         bcf             STATUS,C
0010CA D???           02817         rcall   LCDWriteNibble
                      02818 ;0x02
0010CC 0E20           02819         movlw   b'00100000'             ;#4 set 4-bit
0010CE 6E??           02820         movwf   temp_wr
0010D0 90D8           02821         bcf             STATUS,C
0010D2 D???           02822         rcall   LCDWriteNibble
                      02823 
0010D4 010?           02824         banksel delay   
0010D6 0EFF           02825         movlw   0xFF                    ;Wait ~100us @ 20 MHz
0010D8 6E??           02826         movwf   delay
0010DA D???           02827         rcall   DelayXCycles
                      02828 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      02829 
                      02830 
                      02831 ;       rcall   LCDBusy                 ;Busy?
0010DC EC?? F???      02832         call    LongDelay ;2ms
0010E0 EC?? F???      02833         call    LongDelay ;2ms
0010E4 EC?? F???      02834         call    LongDelay ;2ms
0010E8 EC?? F???      02835         call    LongDelay ;2ms
0010EC EC?? F???      02836         call    LongDelay ;2ms
0010F0 EC?? F???      02837         call    LongDelay ;2ms
0010F4 EC?? F???      02838         call    LongDelay ;2ms
                      02839 
                      02840 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      02841 ;0x0C
                      02842 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      02843 ;0x0C-0
                      02844 ;       movlw   b'00000000'             ;#4 set 4-bit
                      02845 ;       movwf   temp_wr
                      02846 ;       bcf     STATUS,C
                      02847 ;       rcall   LCDWriteNibble
                      02848 ;;0x01--0C
                      02849 ;       movlw   b'11000000'             ;#4 set 4-bit
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 56


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02850 ;       movwf   temp_wr
                      02851 ;       bcf     STATUS,C
                      02852 ;       rcall   LCDWriteNibble
                      02853 ;
                      02854 
0010F8 010?           02855         banksel temp_wr 
0010FA 0E4E           02856         movlw   0x4E
0010FC 6E??           02857         movwf   temp_wr
0010FE D???           02858         rcall   LCDBusy
001100 80D8           02859         bsf             STATUS, C       
001102 D???           02860         rcall   LCDWrite
                      02861 
                      02862 
001104 010?           02863         banksel delay
001106 0EFF           02864         movlw   0xFF                    ;Wait ~100us @ 20 MHz
001108 6E??           02865         movwf   delay
00110A D???           02866         rcall   DelayXCycles
00110C 0012           02867         return
                      02868 ;       GLOBAL  LCDInit 
                      02869 ;/ ***************************************************************************/
                      02870 
                      02871 ;/****************************************************************************/
                      02872 ;     _    ______________________________
                      02873 ; RS  _>--<______________________________
                      02874 ;     _____
                      02875 ; RW       \_____________________________
                      02876 ;                  __________________
                      02877 ; E   ____________/                  \___
                      02878 ;     _____________                ______
                      02879 ; DB  _____________>--------------<______
                      02880 ;
00110E                02881 LCDWriteNibble
00110E A0D8           02882         btfss   STATUS, C               ; Set the register select
001110 9083           02883         bcf             LCD_RS
001112 B0D8           02884         btfsc   STATUS, C       
001114 8083           02885         bsf             LCD_RS
                      02886 
001116 9283           02887         bcf     LCD_RW                  ; Set write mode
                      02888 
001118 9092           02889         bcf     LCD_D4_DIR              ; Set data bits to outputs
00111A 9292           02890         bcf     LCD_D5_DIR
00111C 9492           02891         bcf     LCD_D6_DIR
00111E 9692           02892         bcf     LCD_D7_DIR
                      02893 
001120 0000           02894         NOP                             ; Small delay
001122 0000           02895         NOP
                      02896 
001124 8483           02897         bsf     LCD_E                   ; Setup to clock data
                      02898         
001126 AE??           02899         btfss   temp_wr, 7                      ; Set high nibble
001128 9680           02900         bcf     LCD_D7  
00112A BE??           02901         btfsc   temp_wr, 7
00112C 8680           02902         bsf     LCD_D7
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 57


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00112E AC??           02903         btfss   temp_wr, 6
001130 9480           02904         bcf     LCD_D6  
001132 BC??           02905         btfsc   temp_wr, 6
001134 8480           02906         bsf     LCD_D6
001136 AA??           02907         btfss   temp_wr, 5
001138 9280           02908         bcf     LCD_D5  
00113A BA??           02909         btfsc   temp_wr, 5
00113C 8280           02910         bsf     LCD_D5
00113E A8??           02911         btfss   temp_wr, 4
001140 9080           02912         bcf     LCD_D4
001142 B8??           02913         btfsc   temp_wr, 4
001144 8080           02914         bsf     LCD_D4  
                      02915 
001146 0000           02916         NOP
001148 0000           02917         NOP
                      02918 
00114A 9483           02919         bcf     LCD_E                   ; Send the data
                      02920 
00114C 0012           02921         return
                      02922 ; *******************************************************************
                      02923 
                      02924 
                      02925 
                      02926 
                      02927 
                      02928 ; *******************************************************************
00114E                02929 LCDWrite
                      02930 ;       rcall   LCDBusy
00114E D???           02931         rcall   LCDWriteNibble
001150 010?           02932         banksel temp_wr
001152 3A??           02933         swapf   temp_wr,F
001154 D???           02934         rcall   LCDWriteNibble
001156 3A??           02935         swapf   temp_wr,F
                      02936 
001158 0012           02937         return
                      02938 
                      02939 ;       GLOBAL  LCDWrite
                      02940 ; *******************************************************************
                      02941 
                      02942 
                      02943 
                      02944 
                      02945 
                      02946 ; *******************************************************************
                      02947 ;     _____    _____________________________________________________
                      02948 ; RS  _____>--<_____________________________________________________
                      02949 ;               ____________________________________________________
                      02950 ; RW  _________/
                      02951 ;                  ____________________      ____________________
                      02952 ; E   ____________/                    \____/                    \__
                      02953 ;     _________________                __________                ___
                      02954 ; DB  _________________>--------------<__________>--------------<___
                      02955 ;
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 58


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00115A                02956 LCDRead
00115A 8092           02957         bsf     LCD_D4_DIR              ; Set data bits to inputs
00115C 8292           02958         bsf     LCD_D5_DIR
00115E 8492           02959         bsf     LCD_D6_DIR
001160 8692           02960         bsf     LCD_D7_DIR              
                      02961 
001162 A0D8           02962         btfss   STATUS, C               ; Set the register select
001164 9083           02963         bcf     LCD_RS
001166 B0D8           02964         btfsc   STATUS, C       
001168 8083           02965         bsf     LCD_RS
                      02966 
00116A 8283           02967         bsf     LCD_RW                  ;Read = 1
                      02968 
00116C 0000           02969         NOP
00116E 0000           02970         NOP                     
                      02971 
001170 8483           02972         bsf     LCD_E                   ; Setup to clock data
                      02973 
001172 0000           02974         NOP
001174 0000           02975         NOP
001176 0000           02976         NOP
001178 0000           02977         NOP
                      02978 
00117A A680           02979         btfss   LCD_D7                  ; Get high nibble
00117C 9E??           02980         bcf     temp_rd, 7
00117E B680           02981         btfsc   LCD_D7
001180 8E??           02982         bsf     temp_rd, 7
001182 A480           02983         btfss   LCD_D6                  
001184 9C??           02984         bcf     temp_rd, 6
001186 B480           02985         btfsc   LCD_D6
001188 8C??           02986         bsf     temp_rd, 6
00118A A280           02987         btfss   LCD_D5                  
00118C 9A??           02988         bcf     temp_rd, 5
00118E B280           02989         btfsc   LCD_D5
001190 8A??           02990         bsf     temp_rd, 5
001192 A080           02991         btfss   LCD_D4                  
001194 98??           02992         bcf     temp_rd, 4
001196 B080           02993         btfsc   LCD_D4
001198 88??           02994         bsf     temp_rd, 4
                      02995 
00119A 9483           02996         bcf     LCD_E                   ; Finished reading the data
                      02997 
00119C 0000           02998         NOP
00119E 0000           02999         NOP
0011A0 0000           03000         NOP
0011A2 0000           03001         NOP
0011A4 0000           03002         NOP
0011A6 0000           03003         NOP
0011A8 0000           03004         NOP
0011AA 0000           03005         NOP
                      03006 
0011AC 8483           03007         bsf     LCD_E                   ; Setup to clock data
                      03008 
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 59


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0011AE 0000           03009         NOP
0011B0 0000           03010         NOP
                      03011 
0011B2 A680           03012         btfss   LCD_D7                  ; Get low nibble
0011B4 96??           03013         bcf     temp_rd, 3
0011B6 B680           03014         btfsc   LCD_D7
0011B8 86??           03015         bsf     temp_rd, 3
0011BA A480           03016         btfss   LCD_D6                  
0011BC 94??           03017         bcf     temp_rd, 2
0011BE B480           03018         btfsc   LCD_D6
0011C0 84??           03019         bsf     temp_rd, 2
0011C2 A280           03020         btfss   LCD_D5                  
0011C4 92??           03021         bcf     temp_rd, 1
0011C6 B280           03022         btfsc   LCD_D5
0011C8 82??           03023         bsf     temp_rd, 1
0011CA A080           03024         btfss   LCD_D4                  
0011CC 90??           03025         bcf     temp_rd, 0
0011CE B080           03026         btfsc   LCD_D4
0011D0 80??           03027         bsf     temp_rd, 0
                      03028 
0011D2 9483           03029         bcf     LCD_E                   ; Finished reading the data
                      03030 
0011D4                03031 FinRd
0011D4 0012           03032         return
                      03033 ; *******************************************************************
                      03034 
                      03035 
                      03036 
                      03037 
                      03038 
                      03039 
                      03040 ; *******************************************************************
0011D6                03041 LCDBusy
0011D6 EC?? F???      03042         call    LongDelayLast           
0011DA EC?? F???      03043         call    LongDelayLast           ; lee,added this line
                      03044 
                      03045 ;       call    Delay30ms                       ; lee added this line
                      03046 ;       call    LongDelayLast           ; lee,added this line
                      03047 
0011DE 0012           03048         return
                      03049                                         ; Check BF
0011E0 0100           03050         banksel LCD_INS
                      03051         rlcd    LCD_INS
                          M  IF 0          == 1
                          M         bsf     STATUS, C
                          M         rcall   LCDRead
                          M  ELSE
0011E2 90D8               M         bcf     STATUS, C
0011E4 D???               M         rcall   LCDRead
                          M  ENDIF
0011E6 BE??           03052         btfsc   temp_rd, 7
0011E8 D???           03053         bra     LCDBusy
0011EA 0012           03054         return
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 60


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      03055 
                      03056 ;       GLOBAL  LCDBusy
                      03057 ; *******************************************************************
                      03058 
                      03059 ; *******************************************************************
0011EC                03060 DelayXCycles
0011EC 2E??           03061         decfsz  delay,F
0011EE D???           03062         bra     DelayXCycles
                      03063 
0011F0 0012           03064         return
                      03065 ; *******************************************************************
                      03066         
0011F2                03067 Delay1ms                        ;Approxiamtely at 4Mhz
0011F2 010?           03068         banksel delay
0011F4 6A??           03069         clrf    delay
0011F6                03070 Delay_1
0011F6 0000           03071         nop
0011F8 2E??           03072         decfsz  delay
0011FA EF?? F???      03073         goto    Delay_1
0011FE 0012           03074         return
                      03075 
                      03076 
001200                03077 Delay30ms       ;more than 30 at 4 Mhz  
001200 EC?? F???      03078         call    Delay1ms
001204 EC?? F???      03079         call    Delay1ms
001208 EC?? F???      03080         call    Delay1ms
00120C EC?? F???      03081         call    Delay1ms
001210 EC?? F???      03082         call    Delay1ms
001214 EC?? F???      03083         call    Delay1ms
001218 EC?? F???      03084         call    Delay1ms
00121C EC?? F???      03085         call    Delay1ms
001220 EC?? F???      03086         call    Delay1ms
001224 EC?? F???      03087         call    Delay1ms
001228 EC?? F???      03088         call    Delay1ms
00122C EC?? F???      03089         call    Delay1ms
001230 EC?? F???      03090         call    Delay1ms
001234 EC?? F???      03091         call    Delay1ms
                      03092 
001238 EC?? F???      03093         call    Delay1ms
00123C EC?? F???      03094         call    Delay1ms
001240 EC?? F???      03095         call    Delay1ms
001244 EC?? F???      03096         call    Delay1ms
001248 EC?? F???      03097         call    Delay1ms
00124C EC?? F???      03098         call    Delay1ms
001250 EC?? F???      03099         call    Delay1ms
001254 EC?? F???      03100         call    Delay1ms
001258 EC?? F???      03101         call    Delay1ms
00125C EC?? F???      03102         call    Delay1ms
001260 EC?? F???      03103         call    Delay1ms
001264 EC?? F???      03104         call    Delay1ms
001268 EC?? F???      03105         call    Delay1ms
00126C EC?? F???      03106         call    Delay1ms
                      03107 
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 61


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

001270 EC?? F???      03108         call    Delay1ms
001274 EC?? F???      03109         call    Delay1ms
001278 EC?? F???      03110         call    Delay1ms
00127C EC?? F???      03111         call    Delay1ms
001280 EC?? F???      03112         call    Delay1ms
001284 EC?? F???      03113         call    Delay1ms
001288 EC?? F???      03114         call    Delay1ms
00128C EC?? F???      03115         call    Delay1ms
001290 EC?? F???      03116         call    Delay1ms
001294 EC?? F???      03117         call    Delay1ms
001298 EC?? F???      03118         call    Delay1ms
00129C EC?? F???      03119         call    Delay1ms
0012A0 EC?? F???      03120         call    Delay1ms
0012A4 EC?? F???      03121         call    Delay1ms
0012A8 0012           03122         return
                      03123 
0012AA                03124 LongDelay:
0012AA EC?? F???      03125         call    Delay1ms
0012AE EC?? F???      03126         call    Delay1ms
0012B2 EC?? F???      03127         call    Delay1ms
0012B6 EC?? F???      03128         call    Delay1ms
0012BA EC?? F???      03129         call    Delay1ms
0012BE EC?? F???      03130         call    Delay1ms
0012C2 EC?? F???      03131         call    Delay1ms
0012C6 EC?? F???      03132         call    Delay1ms
0012CA EC?? F???      03133         call    Delay1ms
0012CE 0012           03134         return
                      03135 
                      03136 
0012D0                03137 LongDelayLast
0012D0 EC?? F???      03138         call    Delay1ms
0012D4 EC?? F???      03139         call    Delay1ms
0012D8 EC?? F???      03140         call    Delay1ms
0012DC 0012           03141         return
                      03142 
                      03143 
                      03144 
                      03145         end
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 62


SYMBOL TABLE
  LABEL                             VALUE 

A                                 00000000
ABDEN                             00000000
ABDOVF                            00000007
ACCESS                            00000000
ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ACQT0                             00000003
ACQT1                             00000004
ACQT2                             00000005
ACTVIE                            00000002
ACTVIF                            00000002
ADCON0                            00000FC2
ADCON1                            00000FC1
ADCON2                            00000FC0
ADCS0                             00000000
ADCS1                             00000001
ADCS2                             00000002
ADC_Sign                          00000000
ADDEN                             00000003
ADDR0                             00000000
ADDR1                             00000001
ADDR2                             00000002
ADDR3                             00000003
ADDR4                             00000004
ADDR5                             00000005
ADDR6                             00000006
ADEN                              00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADIP                              00000006
ADON                              00000000
ADRES                             00000FC3
ADRESH                            00000FC4
ADRESL                            00000FC3
AN0                               00000000
AN1                               00000001
AN2                               00000002
AN3                               00000003
AN4                               00000005
BANKED                            00000001
BAUDCON                           00000FB8
BCLIE                             00000003
BCLIF                             00000003
BCLIP                             00000003
BF                                00000000
BGST                              00000005
BOR                               00000000
BRG16                             00000003
BRGH                              00000002
BSR                               00000FE0
BTOEE                             00000004
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 63


SYMBOL TABLE
  LABEL                             VALUE 

BTOEF                             00000004
BTSEE                             00000007
BTSEF                             00000007
C                                 00000000
C1INV                             00000004
C1OUT                             00000006
C2INV                             00000005
C2OUT                             00000007
CCP1                              00000002
CCP1AS                            00000FB6
CCP1CON                           00000FBD
CCP1DEL                           00000FB7
CCP1IE                            00000002
CCP1IF                            00000002
CCP1IP                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP2CON                           00000FBA
CCP2IE                            00000000
CCP2IF                            00000000
CCP2IP                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCPR1                             00000FBE
CCPR1H                            00000FBF
CCPR1L                            00000FBE
CCPR2                             00000FBB
CCPR2H                            00000FBC
CCPR2L                            00000FBB
CFGS                              00000006
CHS0                              00000002
CHS1                              00000003
CHS2                              00000004
CHS3                              00000005
CIS                               00000003
CK                                00000006
CK1SPP                            00000000
CK2SPP                            00000001
CKE                               00000006
CKP                               00000004
CLK1EN                            00000004
CLKCFG0                           00000006
CLKCFG1                           00000007
CM0                               00000000
CM1                               00000001
CM2                               00000002
CMCON                             00000FB4
CMIE                              00000006
CMIF                              00000006
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 64


SYMBOL TABLE
  LABEL                             VALUE 

CMIP                              00000006
COUNTER                           00000000
CRC16EE                           00000002
CRC16EF                           00000002
CRC5EE                            00000001
CRC5EF                            00000001
CREN                              00000004
CSEN                              00000005
CSRC                              00000007
CVR0                              00000000
CVR1                              00000001
CVR2                              00000002
CVR3                              00000003
CVRCON                            00000FB5
CVREF                             00000004
CVREN                             00000007
CVROE                             00000006
CVRR                              00000005
CVRSS                             00000004
ChekDigitT1_RFuel                 0000081C
ChekDigitT2_RFuel                 000007F0
ChekDigitT3_RFuel                 000007C4
ChekDigitT6_UsedF                 000009D8
ChekDigitT7_UsedF                 000009B0
ChekDigitT8_UsedF                 00000984
ChekDigitT9_UsedF                 00000958
D                                 00000005
DATA_ADDRESS                      00000005
DC                                00000001
DC1B0                             00000004
DC1B1                             00000005
DC2B0                             00000004
DC2B1                             00000005
DDRA                              TRISA
DDRB                              TRISB
DDRC                              TRISC
DDRD                              TRISD
DDRE                              TRISE
DFN8EE                            00000003
DFN8EF                            00000003
DIR                               00000002
DONE                              00000001
D_A                               00000005
Delay1ms                          000011F2
Delay30ms                         00001200
DelayXCycles                      000011EC
Delay_1                           000011F6
DisIForGain1                      00000398
DisIForGain2                      0000044E
DisIForGain4                      00000502
DisIForGain8                      000005B8
DisVForGain1                      0000005E
DisVForGain2                      0000011E
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 65


SYMBOL TABLE
  LABEL                             VALUE 

DisVForGain4                      000001E8
DisVForGain8                      00000294
Disp_AtTP9_PressS1                00000F48
Disp_BatLowerThan0_75V            00000D30
Disp_ChargeCompleted              00000B18
Disp_ConnectJP1                   00000CAA
Disp_ConntBattery                 00000EC2
Disp_DisconnectJP2                00000C24
Disp_FuelRemPerct                 0000066E
Disp_FuelRemmAH                   00000766
Disp_InitAtL2                     00000E3C
Disp_PlseWaitAtL1                 00000DB6
Disp_PressS1                      00000B9E
Disp_StdUnderCharged              00000A92
Display_FuelUsed                  00000886
Display_Results                   00000000
Display_Results_Current           00000340
Display_Results_Volts             00000000
ECCP1AS                           00000FB6
ECCP1CON                          00000FBD
ECCP1DEL                          00000FB7
ECCPAS0                           00000004
ECCPAS1                           00000005
ECCPAS2                           00000006
ECCPASE                           00000007
EEADR                             00000FA9
EECON1                            00000FA6
EECON2                            00000FA7
EEDATA                            00000FA8
EEIE                              00000004
EEIF                              00000004
EEIP                              00000004
EEPGD                             00000007
ENDP0                             00000003
ENDP1                             00000004
ENDP2                             00000005
ENDP3                             00000006
EPCONDIS                          00000003
EPHSHK                            00000004
EPINEN                            00000001
EPOUTEN                           00000002
EPSTALL                           00000000
FAST                              00000001
FERR                              00000002
FLTS                              00000002
FREE                              00000004
FRM0                              00000000
FRM1                              00000001
FRM10                             00000002
FRM2                              00000002
FRM3                              00000003
FRM4                              00000004
FRM5                              00000005
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 66


SYMBOL TABLE
  LABEL                             VALUE 

FRM6                              00000006
FRM7                              00000007
FRM8                              00000000
FRM9                              00000001
FSEN                              00000002
FSR0                              00000000
FSR0H                             00000FEA
FSR0L                             00000FE9
FSR1                              00000001
FSR1H                             00000FE2
FSR1L                             00000FE1
FSR2                              00000002
FSR2H                             00000FDA
FSR2L                             00000FD9
FinRd                             000011D4
FoundFistDigit                    00000000
GCEN                              00000007
GIE                               00000007
GIEH                              00000007
GIEL                              00000006
GO                                00000001
GO_DONE                           00000001
Gain_Selected                     00000000
HLVDCON                           00000FD2
HLVDEN                            00000004
HLVDIE                            00000002
HLVDIF                            00000002
HLVDIN                            00000005
HLVDIP                            00000002
HLVDL0                            00000000
HLVDL1                            00000001
HLVDL2                            00000002
HLVDL3                            00000003
I2C_DAT                           00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IDLEIE                            00000004
IDLEIF                            00000004
IDLEN                             00000007
INDF0                             00000FEF
INDF1                             00000FE7
INDF2                             00000FDF
INT0                              00000000
INT0E                             00000004
INT0F                             00000001
INT0IE                            00000004
INT0IF                            00000001
INT1                              00000001
INT1E                             00000003
INT1F                             00000000
INT1IE                            00000003
INT1IF                            00000000
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 67


SYMBOL TABLE
  LABEL                             VALUE 

INT1IP                            00000006
INT1P                             00000006
INT2                              00000002
INT2E                             00000004
INT2F                             00000001
INT2IE                            00000004
INT2IF                            00000001
INT2IP                            00000007
INT2P                             00000007
INTCON                            00000FF2
INTCON2                           00000FF1
INTCON3                           00000FF0
INTEDG0                           00000006
INTEDG1                           00000005
INTEDG2                           00000004
INTSRC                            00000007
IOFS                              00000002
IPEN                              00000007
IPR1                              00000F9F
IPR2                              00000FA2
IRCF0                             00000004
IRCF1                             00000005
IRCF2                             00000006
IRVST                             00000005
IVRST                             00000005
LATA                              00000F89
LATA0                             00000000
LATA1                             00000001
LATA2                             00000002
LATA3                             00000003
LATA4                             00000004
LATA5                             00000005
LATA6                             00000006
LATB                              00000F8A
LATB0                             00000000
LATB1                             00000001
LATB2                             00000002
LATB3                             00000003
LATB4                             00000004
LATB5                             00000005
LATB6                             00000006
LATB7                             00000007
LATC                              00000F8B
LATC0                             00000000
LATC1                             00000001
LATC2                             00000002
LATC6                             00000006
LATC7                             00000007
LATD                              00000F8C
LATD0                             00000000
LATD1                             00000001
LATD2                             00000002
LATD3                             00000003
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 68


SYMBOL TABLE
  LABEL                             VALUE 

LATD4                             00000004
LATD5                             00000005
LATD6                             00000006
LATD7                             00000007
LATE                              00000F8D
LATE0                             00000000
LATE1                             00000001
LATE2                             00000002
LCDBusy                           000011D6
LCDInit                           00000FF0
LCDLine_1                         00000FCE
LCDLine_2                         00000FD8
LCDRead                           0000115A
LCDWrite                          0000114E
LCDWriteNibble                    0000110E
LCD_D4                            PORTA, 0
LCD_D4_DIR                        TRISA, 0
LCD_D5                            PORTA, 1
LCD_D5_DIR                        TRISA, 1
LCD_D6                            PORTA, 2
LCD_D6_DIR                        TRISA, 2
LCD_D7                            PORTA, 3
LCD_D7_DIR                        TRISA, 3
LCD_DATA                          1
LCD_E                             PORTD, 2
LCD_INS                           0
LCD_RS                            PORTD, 0
LCD_RW                            PORTD, 1
LSD                               00000000
LVDCON                            00000FD2
LVDEN                             00000004
LVDIE                             00000002
LVDIF                             00000002
LVDIN                             00000005
LVDIP                             00000002
LVDL0                             00000000
LVDL1                             00000001
LVDL2                             00000002
LVDL3                             00000003
LVV0                              00000000
LVV1                              00000001
LVV2                              00000002
LVV3                              00000003
LessThan_99Pcnt                   000006D8
LongDelay                         000012AA
LongDelayLast                     000012D0
N                                 00000004
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BOR                           00000000
NOT_DONE                          00000001
NOT_IPEN                          00000007
NOT_PD                            00000002
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 69


SYMBOL TABLE
  LABEL                             VALUE 

NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RI                            00000004
NOT_T1SYNC                        00000002
NOT_T3SYNC                        00000002
NOT_TO                            00000003
NOT_W                             00000002
NOT_WRITE                         00000002
OERR                              00000001
OESPP                             00000002
OSC2                              00000006
OSCCON                            00000FD3
OSCFIE                            00000007
OSCFIF                            00000007
OSCFIP                            00000007
OSCTUNE                           00000F9B
OSTS                              00000003
OV                                00000003
P                                 00000004
P1A                               00000002
P1M0                              00000006
P1M1                              00000007
PC                                00000FF9
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000FF9
PCLATH                            00000FFA
PCLATU                            00000FFB
PD                                00000002
PDC0                              00000000
PDC1                              00000001
PDC2                              00000002
PDC3                              00000003
PDC4                              00000004
PDC5                              00000005
PDC6                              00000006
PEIE                              00000006
PEN                               00000002
PGC                               00000006
PGD                               00000007
PGM                               00000005
PIDEE                             00000000
PIDEF                             00000000
PIE1                              00000F9D
PIE2                              00000FA0
PIR1                              00000F9E
PIR2                              00000FA1
PKTDIS                            00000004
PLUSW0                            00000FEB
PLUSW1                            00000FE3
PLUSW2                            00000FDB
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 70


SYMBOL TABLE
  LABEL                             VALUE 

POR                               00000001
PORTA                             00000F80
PORTB                             00000F81
PORTC                             00000F82
PORTD                             00000F83
PORTE                             00000F84
POSTDEC0                          00000FED
POSTDEC1                          00000FE5
POSTDEC2                          00000FDD
POSTINC0                          00000FEE
POSTINC1                          00000FE6
POSTINC2                          00000FDE
PPB0                              00000000
PPB1                              00000001
PPBI                              00000001
PPBRST                            00000006
PR2                               00000FCB
PREINC0                           00000FEC
PREINC1                           00000FE4
PREINC2                           00000FDC
PROD                              00000FF3
PRODH                             00000FF4
PRODL                             00000FF3
PRSEN                             00000007
PSA                               00000003
PSSAC0                            00000002
PSSAC1                            00000003
PSSBD0                            00000000
PSSBD1                            00000001
Put_Negative_Sign                 00000040
Put_Negative_Sign_I               00000380
Put_Positive_Sign                 00000032
Put_Positive_Sign_I               00000372
R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RA6                               00000006
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RBIP                              00000000
RBPU                              00000007
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 71


SYMBOL TABLE
  LABEL                             VALUE 

RC0                               00000000
RC1                               00000001
RC2                               00000002
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RCEN                              00000003
RCIDL                             00000006
RCIE                              00000005
RCIF                              00000005
RCIP                              00000005
RCMT                              00000006
RCON                              00000FD0
RCREG                             00000FAE
RCSTA                             00000FAB
RD                                00000000
RD0                               00000000
RD1                               00000001
RD16                              00000007
RD2                               00000002
RD3                               00000003
RD4                               00000004
RD5                               00000005
RD6                               00000006
RD7                               00000007
RDPU                              00000007
RDSPP                             00000007
RE0                               00000000
RE1                               00000001
RE2                               00000002
RE3                               00000003
READ_WRITE                        00000002
RESUME                            00000002
RI                                00000004
RSEN                              00000001
RX                                00000007
RX9                               00000006
RX9D                              00000000
R_W                               00000002
S                                 00000003
SBOREN                            00000006
SCKP                              00000004
SCS0                              00000000
SCS1                              00000001
SE0                               00000005
SEN                               00000000
SENDB                             00000003
SMP                               00000007
SOFIE                             00000006
SOFIF                             00000006
SPBRG                             00000FAF
SPBRGH                            00000FB0
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 72


SYMBOL TABLE
  LABEL                             VALUE 

SPEN                              00000007
SPP0                              00000000
SPP1                              00000001
SPP2                              00000002
SPP3                              00000003
SPP4                              00000004
SPP5                              00000005
SPP6                              00000006
SPP7                              00000007
SPPBUSY                           00000004
SPPCFG                            00000F63
SPPCON                            00000F65
SPPDATA                           00000F62
SPPEN                             00000000
SPPEPS                            00000F64
SPPIE                             00000007
SPPIF                             00000007
SPPIP                             00000007
SPPOWN                            00000001
SREN                              00000005
SSPADD                            00000FC8
SSPBUF                            00000FC9
SSPCON1                           00000FC6
SSPCON2                           00000FC5
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPIP                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000FC7
STALLIE                           00000005
STALLIF                           00000005
STATUS                            00000FD8
STKFUL                            00000007
STKPTR                            00000FFC
STKPTR0                           00000000
STKPTR1                           00000001
STKPTR2                           00000002
STKPTR3                           00000003
STKPTR4                           00000004
STKUNF                            00000006
SUSPND                            00000001
SWDTE                             00000000
SWDTEN                            00000000
SYNC                              00000004
Start_DisPlay_I_Values            0000038A
Start_DisPlay_Values              0000004A
T08BIT                            00000006
T0CKI                             00000004
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 73


SYMBOL TABLE
  LABEL                             VALUE 

T0CON                             00000FD5
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0IP                              00000002
T0PS0                             00000000
T0PS1                             00000001
T0PS2                             00000002
T0SE                              00000004
T13CKI                            00000000
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000FCD
T1OSCEN                           00000003
T1OSI                             00000001
T1OSO                             00000000
T1RUN                             00000006
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000FCA
T2OUTPS0                          00000003
T2OUTPS1                          00000004
T2OUTPS2                          00000005
T2OUTPS3                          00000006
T3CCP1                            00000003
T3CCP2                            00000006
T3CKPS0                           00000004
T3CKPS1                           00000005
T3CON                             00000FB1
T3NSYNC                           00000002
T3SYNC                            00000002
TABLAT                            00000FF5
TBLPTR                            00000FF6
TBLPTRH                           00000FF7
TBLPTRL                           00000FF6
TBLPTRU                           00000FF8
TMR0H                             00000FD7
TMR0IE                            00000005
TMR0IF                            00000002
TMR0IP                            00000002
TMR0L                             00000FD6
TMR0ON                            00000007
TMR1CS                            00000001
TMR1H                             00000FCF
TMR1IE                            00000000
TMR1IF                            00000000
TMR1IP                            00000000
TMR1L                             00000FCE
TMR1ON                            00000000
TMR2                              00000FCC
TMR2IE                            00000001
TMR2IF                            00000001
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 74


SYMBOL TABLE
  LABEL                             VALUE 

TMR2IP                            00000001
TMR2ON                            00000002
TMR3CS                            00000001
TMR3H                             00000FB3
TMR3IE                            00000001
TMR3IF                            00000001
TMR3IP                            00000001
TMR3L                             00000FB2
TMR3ON                            00000000
TO                                00000003
TOS                               00000FFD
TOSH                              00000FFE
TOSL                              00000FFD
TOSU                              00000FFF
TRISA                             00000F92
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISA6                            00000006
TRISB                             00000F93
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000F94
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC6                            00000006
TRISC7                            00000007
TRISD                             00000F95
TRISD0                            00000000
TRISD1                            00000001
TRISD2                            00000002
TRISD3                            00000003
TRISD4                            00000004
TRISD5                            00000005
TRISD6                            00000006
TRISD7                            00000007
TRISE                             00000F96
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TRNIE                             00000003
TRNIF                             00000003
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 75


SYMBOL TABLE
  LABEL                             VALUE 

TUN0                              00000000
TUN1                              00000001
TUN2                              00000002
TUN3                              00000003
TUN4                              00000004
TX                                00000006
TX9                               00000006
TX9D                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXIP                              00000004
TXREG                             00000FAD
TXSTA                             00000FAC
UA                                00000001
UADDR                             00000F6E
UCFG                              00000F6F
UCON                              00000F6D
UEIE                              00000F6B
UEIR                              00000F6A
UEP0                              00000F70
UEP1                              00000F71
UEP10                             00000F7A
UEP11                             00000F7B
UEP12                             00000F7C
UEP13                             00000F7D
UEP14                             00000F7E
UEP15                             00000F7F
UEP2                              00000F72
UEP3                              00000F73
UEP4                              00000F74
UEP5                              00000F75
UEP6                              00000F76
UEP7                              00000F77
UEP8                              00000F78
UEP9                              00000F79
UERRIE                            00000001
UERRIF                            00000001
UFRM                              00000F66
UFRMH                             00000F67
UFRML                             00000F66
UIE                               00000F69
UIR                               00000F68
UOEMON                            00000006
UPUEN                             00000004
URSTIE                            00000000
URSTIF                            00000000
USBEN                             00000003
USBIE                             00000005
USBIF                             00000005
USBIP                             00000005
USTAT                             00000F6C
UTEYE                             00000007
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 76


SYMBOL TABLE
  LABEL                             VALUE 

UTRDIS                            00000003
VCFG0                             00000004
VCFG1                             00000005
VDIRMAG                           00000007
VREFM                             00000002
VREFP                             00000003
W                                 00000000
WCOL                              00000007
WDTCON                            00000FD1
WR                                00000001
WREG                              00000FE8
WREN                              00000002
WRERR                             00000003
WRSPP                             00000006
WS0                               00000000
WS1                               00000001
WS2                               00000002
WS3                               00000003
WUE                               00000001
Z                                 00000002
_BORV_0_2L                        000000E7
_BORV_1_2L                        000000EF
_BORV_2_2L                        000000F7
_BORV_3_2L                        000000FF
_BOR_OFF_2L                       000000F9
_BOR_ON_2L                        000000FF
_BOR_ON_ACTIVE_2L                 000000FD
_BOR_SOFT_2L                      000000FB
_CCP2MX_OFF_3H                    000000FE
_CCP2MX_ON_3H                     000000FF
_CONFIG1H                         00300001
_CONFIG1L                         00300000
_CONFIG2H                         00300003
_CONFIG2L                         00300002
_CONFIG3H                         00300005
_CONFIG4L                         00300006
_CONFIG5H                         00300009
_CONFIG5L                         00300008
_CONFIG6H                         0030000B
_CONFIG6L                         0030000A
_CONFIG7H                         0030000D
_CONFIG7L                         0030000C
_CP0_OFF_5L                       000000FF
_CP0_ON_5L                        000000FE
_CP1_OFF_5L                       000000FF
_CP1_ON_5L                        000000FD
_CP2_OFF_5L                       000000FF
_CP2_ON_5L                        000000FB
_CP3_OFF_5L                       000000FF
_CP3_ON_5L                        000000F7
_CPB_OFF_5H                       000000FF
_CPB_ON_5H                        000000BF
_CPD_OFF_5H                       000000FF
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 77


SYMBOL TABLE
  LABEL                             VALUE 

_CPD_ON_5H                        0000007F
_CPUDIV_OSC1_PLL2_1L              000000E7
_CPUDIV_OSC2_PLL3_1L              000000EF
_CPUDIV_OSC3_PLL4_1L              000000F7
_CPUDIV_OSC4_PLL6_1L              000000FF
_DEBUG_OFF_4L                     000000FF
_DEBUG_ON_4L                      0000007F
_DEVID1                           003FFFFE
_DEVID2                           003FFFFF
_EBTR0_OFF_7L                     000000FF
_EBTR0_ON_7L                      000000FE
_EBTR1_OFF_7L                     000000FF
_EBTR1_ON_7L                      000000FD
_EBTR2_OFF_7L                     000000FF
_EBTR2_ON_7L                      000000FB
_EBTR3_OFF_7L                     000000FF
_EBTR3_ON_7L                      000000F7
_EBTRB_OFF_7H                     000000FF
_EBTRB_ON_7H                      000000BF
_FCMEN_OFF_1H                     000000BF
_FCMEN_ON_1H                      000000FF
_FOSC_ECIO_EC_1H                  000000F4
_FOSC_ECPLLIO_EC_1H               000000F6
_FOSC_ECPLL_EC_1H                 000000F7
_FOSC_EC_EC_1H                    000000F5
_FOSC_HSPLL_HS_1H                 000000FE
_FOSC_HS_1H                       000000FC
_FOSC_INTOSCIO_EC_1H              000000F8
_FOSC_INTOSC_EC_1H                000000F9
_FOSC_INTOSC_HS_1H                000000FB
_FOSC_INTOSC_XT_1H                000000FA
_FOSC_XTPLL_XT_1H                 000000F2
_FOSC_XT_XT_1H                    000000F0
_ICPRT_OFF_4L                     000000DF
_ICPRT_ON_4L                      000000FF
_IDLOC0                           00200000
_IDLOC1                           00200001
_IDLOC2                           00200002
_IDLOC3                           00200003
_IDLOC4                           00200004
_IDLOC5                           00200005
_IDLOC6                           00200006
_IDLOC7                           00200007
_IESO_OFF_1H                      0000007F
_IESO_ON_1H                       000000FF
_LPT1OSC_OFF_3H                   000000FB
_LPT1OSC_ON_3H                    000000FF
_LVP_OFF_4L                       000000FB
_LVP_ON_4L                        000000FF
_MCLRE_OFF_3H                     0000007F
_MCLRE_ON_3H                      000000FF
_PBADEN_OFF_3H                    000000FD
_PBADEN_ON_3H                     000000FF
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 78


SYMBOL TABLE
  LABEL                             VALUE 

_PLLDIV_10_1L                     000000FE
_PLLDIV_12_1L                     000000FF
_PLLDIV_1_1L                      000000F8
_PLLDIV_2_1L                      000000F9
_PLLDIV_3_1L                      000000FA
_PLLDIV_4_1L                      000000FB
_PLLDIV_5_1L                      000000FC
_PLLDIV_6_1L                      000000FD
_PWRT_OFF_2L                      000000FF
_PWRT_ON_2L                       000000FE
_STVREN_OFF_4L                    000000FE
_STVREN_ON_4L                     000000FF
_USBDIV_1_1L                      000000DF
_USBDIV_2_1L                      000000FF
_VREGEN_OFF_2L                    000000DF
_VREGEN_ON_2L                     000000FF
_WDTPS_1024_2H                    000000F5
_WDTPS_128_2H                     000000EF
_WDTPS_16384_2H                   000000FD
_WDTPS_16_2H                      000000E9
_WDTPS_1_2H                       000000E1
_WDTPS_2048_2H                    000000F7
_WDTPS_256_2H                     000000F1
_WDTPS_2_2H                       000000E3
_WDTPS_32768_2H                   000000FF
_WDTPS_32_2H                      000000EB
_WDTPS_4096_2H                    000000F9
_WDTPS_4_2H                       000000E5
_WDTPS_512_2H                     000000F3
_WDTPS_64_2H                      000000ED
_WDTPS_8192_2H                    000000FB
_WDTPS_8_2H                       000000E7
_WDT_OFF_2H                       000000FE
_WDT_ON_2H                        000000FF
_WRT0_OFF_6L                      000000FF
_WRT0_ON_6L                       000000FE
_WRT1_OFF_6L                      000000FF
_WRT1_ON_6L                       000000FD
_WRT2_OFF_6L                      000000FF
_WRT2_ON_6L                       000000FB
_WRT3_OFF_6L                      000000FF
_WRT3_ON_6L                       000000F7
_WRTB_OFF_6H                      000000FF
_WRTB_ON_6H                       000000BF
_WRTC_OFF_6H                      000000FF
_WRTC_ON_6H                       000000DF
_WRTD_OFF_6H                      000000FF
_WRTD_ON_6H                       0000007F
_XINST_OFF_4L                     000000BF
_XINST_ON_4L                      000000FF
__18F4550                         00000001
bin16_bcd                         00000000
bin_bcd                           00000000
MPASM  5.1           FUELGAUGE_WRITE_LCD.ASM   12-18-2007  18:09:29         PAGE 79


SYMBOL TABLE
  LABEL                             VALUE 

d_write                           00000FE0
delay                             00000001
digitT1                           00000000
digitT10                          00000000
digitT11                          00000000
digitT12                          00000000
digitT13                          00000000
digitT2                           00000000
digitT2_RFuel                     00000804
digitT3                           00000000
digitT3_RFuel                     000007D8
digitT4                           00000000
digitT5                           00000000
digitT6                           00000000
digitT7                           00000000
digitT7_used                      000009C4
digitT8                           00000000
digitT8_used                      00000998
digitT9                           00000000
digitT9_used                      0000096C
i_write                           00000FE8
lil1                              00001032
lil2                              0000104C
rlcd                              
temp_rd                           00000003
temp_wr                           00000002

Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :     0 reported,     0 suppressed

